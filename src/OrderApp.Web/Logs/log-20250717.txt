2025-07-17 08:56:47.494 +04:00 [INF] Starting web host
2025-07-17 08:58:44.948 +04:00 [INF] Starting web host
2025-07-17 08:58:45.295 +04:00 [INF] Options were configured
2025-07-17 08:58:45.304 +04:00 [INF] Infrastructure services registered
2025-07-17 08:58:45.327 +04:00 [INF] Mediatr and Email Sender services registered
2025-07-17 08:58:45.947 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-07-17 08:58:46.724 +04:00 [DBG] The property 'PhoneNumber.ContributorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-07-17 08:58:46.736 +04:00 [WRN] The foreign key property 'UserRole.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-17 08:58:46.802 +04:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-17 08:58:46.891 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 08:58:46.934 +04:00 [DBG] Creating DbConnection.
2025-07-17 08:58:47.023 +04:00 [DBG] Created DbConnection. (88ms).
2025-07-17 08:58:47.036 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 08:58:47.318 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 08:58:47.331 +04:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-07-17 08:58:47.344 +04:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (11ms).
2025-07-17 08:58:47.351 +04:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (22ms).
2025-07-17 08:58:47.363 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-17 08:58:47.452 +04:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-17 08:58:47.467 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 08:58:47.486 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (12ms).
2025-07-17 08:58:47.505 +04:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-07-17 08:58:47.512 +04:00 [DBG] Created DbCommand for 'ExecuteScalar' (7ms).
2025-07-17 08:58:47.520 +04:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (15ms).
2025-07-17 08:58:47.528 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 08:58:47.543 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 08:58:47.555 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-07-17 08:58:47.933 +04:00 [INF] Executed DbCommand (380ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-07-17 08:58:47.947 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 08:58:47.955 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (7ms).
2025-07-17 08:58:47.971 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 08:58:48.071 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 08:58:48.078 +04:00 [DBG] Disposed connection to database '' on server '' (7ms).
2025-07-17 08:58:48.301 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-07-17 08:58:48.379 +04:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-17 08:58:48.729 +04:00 [INF] Registered 29 endpoints in 3,376 milliseconds.
2025-07-17 08:58:48.956 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 08:58:49.007 +04:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any()'
2025-07-17 08:58:49.472 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: OrderApp.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-07-17 08:58:49.547 +04:00 [DBG] Creating DbConnection.
2025-07-17 08:58:49.550 +04:00 [DBG] Created DbConnection. (3ms).
2025-07-17 08:58:49.552 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 08:58:49.558 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 08:58:49.561 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 08:58:49.564 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-07-17 08:58:49.568 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-07-17 08:58:49.574 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-17 08:58:49.595 +04:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-17 08:58:49.620 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 08:58:49.625 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 23ms reading results.
2025-07-17 08:58:49.628 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 08:58:49.631 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (2ms).
2025-07-17 08:58:49.634 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 08:58:49.638 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 08:58:49.643 +04:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-07-17 08:58:49.647 +04:00 [DBG] Hosting starting
2025-07-17 08:58:49.675 +04:00 [INF] User profile is available. Using 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-17 08:58:49.724 +04:00 [DBG] Reading data from file 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys\key-d76fcede-8a6f-46d5-9032-13cac50778bc.xml'.
2025-07-17 08:58:49.735 +04:00 [DBG] Found key {d76fcede-8a6f-46d5-9032-13cac50778bc}.
2025-07-17 08:58:49.753 +04:00 [DBG] Considering key {d76fcede-8a6f-46d5-9032-13cac50778bc} with expiration date 2025-08-04 16:06:59Z as default key.
2025-07-17 08:58:49.761 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-07-17 08:58:49.765 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-07-17 08:58:49.770 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-07-17 08:58:49.778 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-07-17 08:58:49.782 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-07-17 08:58:49.788 +04:00 [DBG] Using key {d76fcede-8a6f-46d5-9032-13cac50778bc} as the default key.
2025-07-17 08:58:49.792 +04:00 [DBG] Key ring with default key {d76fcede-8a6f-46d5-9032-13cac50778bc} was loaded during application startup.
2025-07-17 08:58:49.857 +04:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-07-17 08:58:49.860 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-07-17 08:58:49.954 +04:00 [INF] Now listening on: https://localhost:57679
2025-07-17 08:58:49.956 +04:00 [DBG] Loaded hosting startup assembly OrderApp.Web
2025-07-17 08:58:49.958 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-17 08:58:49.960 +04:00 [INF] Hosting environment: Development
2025-07-17 08:58:49.962 +04:00 [INF] Content root path: C:\Users\zakir\OneDrive\Masaüstü\Work\OrderApp\src\OrderApp.Web
2025-07-17 08:58:49.964 +04:00 [DBG] Hosting started
2025-07-17 08:58:50.263 +04:00 [DBG] Connection id "0HNE4TQFDDTVN" accepted.
2025-07-17 08:58:50.266 +04:00 [DBG] Connection id "0HNE4TQFDDTVN" started.
2025-07-17 08:58:50.340 +04:00 [DBG] Connection 0HNE4TQFDDTVN established using the following protocol: "Tls13"
2025-07-17 08:58:50.415 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2025-07-17 08:58:50.519 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-07-17 08:58:50.524 +04:00 [DBG] Request did not match any endpoints
2025-07-17 08:58:50.584 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 08:58:50.753 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html; charset=utf-8 340.2353ms
2025-07-17 08:58:51.787 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2025-07-17 08:58:51.804 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-07-17 08:58:51.806 +04:00 [DBG] Request did not match any endpoints
2025-07-17 08:58:51.808 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 08:58:51.816 +04:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-07-17 08:58:51.909 +04:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-07-17 08:58:53.211 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json; charset=utf-8 1424.255ms
2025-07-17 08:58:53.215 +04:00 [DBG] Connection id "0HNE4TQFDDTVN" received FIN.
2025-07-17 08:58:53.235 +04:00 [DBG] Connection id "0HNE4TQFDDTVN" is closed. The last processed stream ID was 3.
2025-07-17 08:58:53.235 +04:00 [DBG] The connection queue processing loop for 0HNE4TQFDDTVN completed.
2025-07-17 08:58:53.241 +04:00 [DBG] Connection id "0HNE4TQFDDTVN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-07-17 08:58:53.271 +04:00 [DBG] Connection id "0HNE4TQFDDTVN" stopped.
2025-07-17 08:59:01.891 +04:00 [DBG] Connection id "0HNE4TQFDDTVO" accepted.
2025-07-17 08:59:01.896 +04:00 [DBG] Connection id "0HNE4TQFDDTVO" started.
2025-07-17 08:59:01.907 +04:00 [DBG] Connection 0HNE4TQFDDTVO established using the following protocol: "Tls13"
2025-07-17 08:59:03.219 +04:00 [DBG] Connection id "0HNE4TQFDDTVO" received FIN.
2025-07-17 08:59:03.222 +04:00 [DBG] Connection id "0HNE4TQFDDTVO" is closed. The last processed stream ID was 0.
2025-07-17 08:59:03.223 +04:00 [DBG] The connection queue processing loop for 0HNE4TQFDDTVO completed.
2025-07-17 08:59:03.226 +04:00 [DBG] Connection id "0HNE4TQFDDTVO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-07-17 08:59:03.253 +04:00 [DBG] Connection id "0HNE4TQFDDTVO" stopped.
2025-07-17 08:59:05.706 +04:00 [DBG] Connection id "0HNE4TQFDDTVP" accepted.
2025-07-17 08:59:05.709 +04:00 [DBG] Connection id "0HNE4TQFDDTVP" started.
2025-07-17 08:59:05.718 +04:00 [DBG] Connection 0HNE4TQFDDTVP established using the following protocol: "Tls13"
2025-07-17 08:59:05.721 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/auth/Register - application/json 81
2025-07-17 08:59:05.733 +04:00 [DBG] 1 candidate(s) found for the request path '/auth/Register'
2025-07-17 08:59:05.737 +04:00 [DBG] Request matched endpoint 'HTTP: POST auth/Register'
2025-07-17 08:59:05.741 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 08:59:05.752 +04:00 [DBG] Connection id "0HNE4TQFDDTVP", Request id "0HNE4TQFDDTVP:00000001": started reading request body.
2025-07-17 08:59:05.755 +04:00 [DBG] Connection id "0HNE4TQFDDTVP", Request id "0HNE4TQFDDTVP:00000001": done reading request body.
2025-07-17 08:59:05.760 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-07-17 08:59:05.764 +04:00 [INF] Executing endpoint 'HTTP: POST auth/Register'
2025-07-17 08:59:06.003 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 08:59:06.028 +04:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Where(u => u.Email == __mail_0 || u.Name == __name_1)
    .FirstOrDefault()'
2025-07-17 08:59:06.194 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Email (string) Required, 1], [Property: User.Name (string) Required, 2], [Property: User.Password (string) Required, 3] }
            SELECT TOP(1) u.Id, u.Email, u.Name, u.Password
            FROM Users AS u
            WHERE (u.Email == @__mail_0) || (u.Name == @__name_1)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Email (string) Required, 1], [Property: User.Name (string) Required, 2], [Property: User.Password (string) Required, 3] }
            SELECT TOP(1) u.Id, u.Email, u.Name, u.Password
            FROM Users AS u
            WHERE (u.Email == @__mail_0) || (u.Name == @__name_1), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Email>k__BackingField = dataReader.GetString(1);
                                    instance.<Name>k__BackingField = dataReader.GetString(2);
                                    instance.<Password>k__BackingField = dataReader.GetString(3);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: OrderApp.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-07-17 08:59:06.238 +04:00 [DBG] Creating DbConnection.
2025-07-17 08:59:06.240 +04:00 [DBG] Created DbConnection. (2ms).
2025-07-17 08:59:06.242 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 08:59:06.245 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 08:59:06.247 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 08:59:06.250 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-07-17 08:59:06.258 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-07-17 08:59:06.264 +04:00 [DBG] Executing DbCommand [Parameters=[@__mail_0='?' (Size = 4000), @__name_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Name], [u].[Password]
FROM [Users] AS [u]
WHERE [u].[Email] = @__mail_0 OR [u].[Name] = @__name_1
2025-07-17 08:59:06.349 +04:00 [INF] Executed DbCommand (90ms) [Parameters=[@__mail_0='?' (Size = 4000), @__name_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Name], [u].[Password]
FROM [Users] AS [u]
WHERE [u].[Email] = @__mail_0 OR [u].[Name] = @__name_1
2025-07-17 08:59:06.472 +04:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 08:59:06.531 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 08:59:06.541 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 185ms reading results.
2025-07-17 08:59:06.548 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 08:59:06.555 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (7ms).
2025-07-17 08:59:06.570 +04:00 [INF] Executed endpoint 'HTTP: POST auth/Register'
2025-07-17 08:59:06.664 +04:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: User already exists.
   at OrderApp.Web.Register.RegisterEndpointService.RegisterAsync(RegisterRequest req, CancellationToken ct) in C:\Users\zakir\OneDrive\Masaüstü\Work\OrderApp\src\OrderApp.Web\Register\RegisterEndpointService.cs:line 23
   at OrderApp.Web.Register.ResgisterEndpoint.HandleAsync(RegisterRequest req, CancellationToken ct) in C:\Users\zakir\OneDrive\Masaüstü\Work\OrderApp\src\OrderApp.Web\Register\ResgisterEndpoint.cs:line 18
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at NSwag.AspNetCore.Middlewares.SwaggerUiIndexMiddleware.Invoke(HttpContext context)
   at NSwag.AspNetCore.Middlewares.RedirectToIndexMiddleware.Invoke(HttpContext context)
   at NSwag.AspNetCore.Middlewares.OpenApiDocumentMiddleware.Invoke(HttpContext context)
   at Ardalis.ListStartupServices.ShowAllServicesMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-17 08:59:06.783 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/auth/Register  {
  "username": "string",
  "password": "string",
  "email": "user@example.com"
} Responded with [500] in 1015ms
2025-07-17 08:59:06.789 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 08:59:06.797 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 08:59:06.803 +04:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-07-17 08:59:06.808 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/auth/Register - 500 2342 application/json 1086.9866ms
2025-07-17 08:59:08.217 +04:00 [DBG] Connection id "0HNE4TQFDDTVP" received FIN.
2025-07-17 08:59:08.221 +04:00 [DBG] Connection id "0HNE4TQFDDTVP" is closed. The last processed stream ID was 1.
2025-07-17 08:59:08.222 +04:00 [DBG] The connection queue processing loop for 0HNE4TQFDDTVP completed.
2025-07-17 08:59:08.226 +04:00 [DBG] Connection id "0HNE4TQFDDTVP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-07-17 08:59:08.246 +04:00 [DBG] Connection id "0HNE4TQFDDTVP" stopped.
2025-07-17 09:06:01.686 +04:00 [INF] Application is shutting down...
2025-07-17 09:06:01.687 +04:00 [DBG] Hosting stopping
2025-07-17 09:06:01.704 +04:00 [DBG] Hosting stopped
2025-07-17 09:06:16.730 +04:00 [INF] Starting web host
2025-07-17 09:06:17.127 +04:00 [INF] Options were configured
2025-07-17 09:06:17.134 +04:00 [INF] Infrastructure services registered
2025-07-17 09:06:17.154 +04:00 [INF] Mediatr and Email Sender services registered
2025-07-17 09:06:17.657 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-07-17 09:06:18.406 +04:00 [DBG] The property 'PhoneNumber.ContributorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-07-17 09:06:18.416 +04:00 [WRN] The foreign key property 'UserRole.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-17 09:06:18.490 +04:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-17 09:06:18.613 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 09:06:18.637 +04:00 [DBG] Creating DbConnection.
2025-07-17 09:06:18.693 +04:00 [DBG] Created DbConnection. (53ms).
2025-07-17 09:06:18.702 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:06:19.025 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:06:19.042 +04:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-07-17 09:06:19.055 +04:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (12ms).
2025-07-17 09:06:19.061 +04:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (24ms).
2025-07-17 09:06:19.073 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-17 09:06:19.159 +04:00 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-17 09:06:19.172 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:06:19.196 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (16ms).
2025-07-17 09:06:19.211 +04:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-07-17 09:06:19.215 +04:00 [DBG] Created DbCommand for 'ExecuteScalar' (4ms).
2025-07-17 09:06:19.221 +04:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (10ms).
2025-07-17 09:06:19.226 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:06:19.234 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:06:19.239 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-07-17 09:06:19.408 +04:00 [INF] Executed DbCommand (169ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-07-17 09:06:19.415 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:06:19.417 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (2ms).
2025-07-17 09:06:19.424 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 09:06:19.430 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:06:19.434 +04:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-07-17 09:06:19.504 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-07-17 09:06:19.552 +04:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-17 09:06:20.018 +04:00 [INF] Registered 29 endpoints in 2,850 milliseconds.
2025-07-17 09:06:20.197 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 09:06:20.244 +04:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any()'
2025-07-17 09:06:20.644 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: OrderApp.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-07-17 09:06:20.697 +04:00 [DBG] Creating DbConnection.
2025-07-17 09:06:20.699 +04:00 [DBG] Created DbConnection. (2ms).
2025-07-17 09:06:20.701 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:06:20.703 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:06:20.704 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 09:06:20.706 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-07-17 09:06:20.709 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-07-17 09:06:20.714 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-17 09:06:20.731 +04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-17 09:06:20.788 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:06:20.890 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 149ms reading results.
2025-07-17 09:06:20.899 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:06:20.904 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (4ms).
2025-07-17 09:06:20.912 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 09:06:20.938 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:06:20.943 +04:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-07-17 09:06:20.949 +04:00 [DBG] Hosting starting
2025-07-17 09:06:20.977 +04:00 [INF] User profile is available. Using 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-17 09:06:21.048 +04:00 [DBG] Reading data from file 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys\key-d76fcede-8a6f-46d5-9032-13cac50778bc.xml'.
2025-07-17 09:06:21.065 +04:00 [DBG] Found key {d76fcede-8a6f-46d5-9032-13cac50778bc}.
2025-07-17 09:06:21.096 +04:00 [DBG] Considering key {d76fcede-8a6f-46d5-9032-13cac50778bc} with expiration date 2025-08-04 16:06:59Z as default key.
2025-07-17 09:06:21.115 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-07-17 09:06:21.125 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-07-17 09:06:21.135 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-07-17 09:06:21.155 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-07-17 09:06:21.164 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-07-17 09:06:21.175 +04:00 [DBG] Using key {d76fcede-8a6f-46d5-9032-13cac50778bc} as the default key.
2025-07-17 09:06:21.183 +04:00 [DBG] Key ring with default key {d76fcede-8a6f-46d5-9032-13cac50778bc} was loaded during application startup.
2025-07-17 09:06:21.283 +04:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-07-17 09:06:21.287 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-07-17 09:06:21.481 +04:00 [INF] Now listening on: https://localhost:57679
2025-07-17 09:06:21.483 +04:00 [DBG] Loaded hosting startup assembly OrderApp.Web
2025-07-17 09:06:21.484 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-17 09:06:21.486 +04:00 [INF] Hosting environment: Development
2025-07-17 09:06:21.488 +04:00 [INF] Content root path: C:\Users\zakir\OneDrive\Masaüstü\Work\OrderApp\src\OrderApp.Web
2025-07-17 09:06:21.493 +04:00 [DBG] Hosting started
2025-07-17 09:06:23.554 +04:00 [DBG] Connection id "0HNE4TUMGB74L" accepted.
2025-07-17 09:06:23.563 +04:00 [DBG] Connection id "0HNE4TUMGB74L" started.
2025-07-17 09:06:23.708 +04:00 [DBG] Connection 0HNE4TUMGB74L established using the following protocol: "Tls13"
2025-07-17 09:06:23.815 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2025-07-17 09:06:23.913 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-07-17 09:06:23.915 +04:00 [DBG] Request did not match any endpoints
2025-07-17 09:06:23.969 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 09:06:24.149 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html; charset=utf-8 335.3269ms
2025-07-17 09:06:25.336 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2025-07-17 09:06:25.367 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-07-17 09:06:25.369 +04:00 [DBG] Request did not match any endpoints
2025-07-17 09:06:25.373 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 09:06:25.390 +04:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-07-17 09:06:25.495 +04:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-07-17 09:06:27.662 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json; charset=utf-8 2325.2158ms
2025-07-17 09:06:31.202 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/auth/Register - application/json 81
2025-07-17 09:06:31.217 +04:00 [DBG] 1 candidate(s) found for the request path '/auth/Register'
2025-07-17 09:06:31.221 +04:00 [DBG] Request matched endpoint 'HTTP: POST auth/Register'
2025-07-17 09:06:31.231 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 09:06:31.245 +04:00 [DBG] Connection id "0HNE4TUMGB74L", Request id "0HNE4TUMGB74L:00000005": started reading request body.
2025-07-17 09:06:31.249 +04:00 [DBG] Connection id "0HNE4TUMGB74L", Request id "0HNE4TUMGB74L:00000005": done reading request body.
2025-07-17 09:06:31.262 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-07-17 09:06:31.267 +04:00 [INF] Executing endpoint 'HTTP: POST auth/Register'
2025-07-17 09:06:31.675 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 09:06:31.715 +04:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Where(u => u.Email == __mail_0 || u.Name == __name_1)
    .FirstOrDefault()'
2025-07-17 09:06:31.885 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Email (string) Required, 1], [Property: User.Name (string) Required, 2], [Property: User.Password (string) Required, 3] }
            SELECT TOP(1) u.Id, u.Email, u.Name, u.Password
            FROM Users AS u
            WHERE (u.Email == @__mail_0) || (u.Name == @__name_1)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Email (string) Required, 1], [Property: User.Name (string) Required, 2], [Property: User.Password (string) Required, 3] }
            SELECT TOP(1) u.Id, u.Email, u.Name, u.Password
            FROM Users AS u
            WHERE (u.Email == @__mail_0) || (u.Name == @__name_1), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Email>k__BackingField = dataReader.GetString(1);
                                    instance.<Name>k__BackingField = dataReader.GetString(2);
                                    instance.<Password>k__BackingField = dataReader.GetString(3);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: OrderApp.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-07-17 09:06:31.928 +04:00 [DBG] Creating DbConnection.
2025-07-17 09:06:31.932 +04:00 [DBG] Created DbConnection. (4ms).
2025-07-17 09:06:31.935 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:06:31.938 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:06:31.943 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 09:06:31.946 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-07-17 09:06:31.956 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2025-07-17 09:06:31.965 +04:00 [DBG] Executing DbCommand [Parameters=[@__mail_0='?' (Size = 4000), @__name_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Name], [u].[Password]
FROM [Users] AS [u]
WHERE [u].[Email] = @__mail_0 OR [u].[Name] = @__name_1
2025-07-17 09:06:32.016 +04:00 [INF] Executed DbCommand (55ms) [Parameters=[@__mail_0='?' (Size = 4000), @__name_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Name], [u].[Password]
FROM [Users] AS [u]
WHERE [u].[Email] = @__mail_0 OR [u].[Name] = @__name_1
2025-07-17 09:06:32.211 +04:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:06:32.294 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:06:32.304 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 276ms reading results.
2025-07-17 09:06:32.316 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:06:32.324 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (8ms).
2025-07-17 09:06:32.337 +04:00 [ERR] Already Exsisting User
System.InvalidOperationException: User already exists.
   at OrderApp.Web.Register.RegisterEndpointService.RegisterAsync(RegisterRequest req, CancellationToken ct) in C:\Users\zakir\OneDrive\Masaüstü\Work\OrderApp\src\OrderApp.Web\Register\RegisterEndpointService.cs:line 23
2025-07-17 09:06:32.423 +04:00 [ERR] Exception
System.InvalidOperationException: Registration failed.
   at OrderApp.Web.Register.ResgisterEndpoint.HandleAsync(RegisterRequest req, CancellationToken ct) in C:\Users\zakir\OneDrive\Masaüstü\Work\OrderApp\src\OrderApp.Web\Register\ResgisterEndpoint.cs:line 23
2025-07-17 09:06:32.499 +04:00 [INF] Executed endpoint 'HTTP: POST auth/Register'
2025-07-17 09:06:32.651 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/auth/Register  {
  "username": "string",
  "password": "string",
  "email": "user@example.com"
} Responded with [400] in 1384ms
2025-07-17 09:06:32.657 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 09:06:32.667 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:06:32.672 +04:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-07-17 09:06:32.678 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/auth/Register - 400 207 application/json 1476.1795ms
2025-07-17 09:06:34.017 +04:00 [DBG] Connection id "0HNE4TUMGB74L" received FIN.
2025-07-17 09:06:34.021 +04:00 [DBG] Connection id "0HNE4TUMGB74L" is closed. The last processed stream ID was 5.
2025-07-17 09:06:34.021 +04:00 [DBG] The connection queue processing loop for 0HNE4TUMGB74L completed.
2025-07-17 09:06:34.023 +04:00 [DBG] Connection id "0HNE4TUMGB74L" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-07-17 09:06:34.034 +04:00 [DBG] Connection id "0HNE4TUMGB74L" stopped.
2025-07-17 09:07:59.829 +04:00 [DBG] Connection id "0HNE4TUMGB74M" accepted.
2025-07-17 09:07:59.836 +04:00 [DBG] Connection id "0HNE4TUMGB74M" started.
2025-07-17 09:07:59.861 +04:00 [DBG] Connection 0HNE4TUMGB74M established using the following protocol: "Tls13"
2025-07-17 09:07:59.874 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/auth/Register - application/json 84
2025-07-17 09:07:59.896 +04:00 [DBG] 1 candidate(s) found for the request path '/auth/Register'
2025-07-17 09:07:59.903 +04:00 [DBG] Request matched endpoint 'HTTP: POST auth/Register'
2025-07-17 09:07:59.912 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 09:07:59.919 +04:00 [DBG] Connection id "0HNE4TUMGB74M", Request id "0HNE4TUMGB74M:00000001": started reading request body.
2025-07-17 09:07:59.926 +04:00 [DBG] Connection id "0HNE4TUMGB74M", Request id "0HNE4TUMGB74M:00000001": done reading request body.
2025-07-17 09:07:59.934 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-07-17 09:07:59.939 +04:00 [INF] Executing endpoint 'HTTP: POST auth/Register'
2025-07-17 09:07:59.967 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 09:07:59.999 +04:00 [DBG] Creating DbConnection.
2025-07-17 09:08:00.005 +04:00 [DBG] Created DbConnection. (6ms).
2025-07-17 09:08:00.009 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:00.021 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:00.028 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 09:08:00.032 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-07-17 09:08:00.037 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-07-17 09:08:00.041 +04:00 [DBG] Executing DbCommand [Parameters=[@__mail_0='?' (Size = 4000), @__name_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Name], [u].[Password]
FROM [Users] AS [u]
WHERE [u].[Email] = @__mail_0 OR [u].[Name] = @__name_1
2025-07-17 09:08:00.058 +04:00 [INF] Executed DbCommand (17ms) [Parameters=[@__mail_0='?' (Size = 4000), @__name_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Name], [u].[Password]
FROM [Users] AS [u]
WHERE [u].[Email] = @__mail_0 OR [u].[Name] = @__name_1
2025-07-17 09:08:00.082 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:00.103 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 25ms reading results.
2025-07-17 09:08:00.141 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:00.159 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (18ms).
2025-07-17 09:08:00.224 +04:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:00.256 +04:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:00.272 +04:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-07-17 09:08:00.283 +04:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-07-17 09:08:00.306 +04:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-07-17 09:08:00.311 +04:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-07-17 09:08:00.316 +04:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-07-17 09:08:00.476 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:00.481 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:00.491 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 09:08:00.496 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-07-17 09:08:00.501 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-07-17 09:08:00.506 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Email], [Name], [Password])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-07-17 09:08:00.572 +04:00 [INF] Executed DbCommand (66ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Email], [Name], [Password])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-07-17 09:08:00.609 +04:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-07-17 09:08:00.651 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:00.660 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 80ms reading results.
2025-07-17 09:08:00.674 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:00.683 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (9ms).
2025-07-17 09:08:00.752 +04:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:00.773 +04:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-07-17 09:08:00.787 +04:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-07-17 09:08:00.794 +04:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-07-17 09:08:00.835 +04:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:00.848 +04:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-07-17 09:08:00.855 +04:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-07-17 09:08:00.873 +04:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.Roles'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:00.901 +04:00 [DBG] 'AppDbContext' generated a temporary value for the property 'UserRole.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:00.942 +04:00 [DBG] Context 'AppDbContext' started tracking 'UserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:00.947 +04:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-07-17 09:08:00.953 +04:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-07-17 09:08:00.956 +04:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-07-17 09:08:00.975 +04:00 [DBG] Executing 2 update commands as a batch.
2025-07-17 09:08:00.983 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:00.989 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:00.998 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-07-17 09:08:01.017 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-07-17 09:08:01.022 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 09:08:01.026 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-07-17 09:08:01.033 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-07-17 09:08:01.039 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p6='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserRoles] ([RoleId], [UserId], [UserId1])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
UPDATE [Users] SET [Email] = @p3, [Name] = @p4, [Password] = @p5
OUTPUT 1
WHERE [Id] = @p6;
2025-07-17 09:08:01.099 +04:00 [INF] Executed DbCommand (62ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p6='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserRoles] ([RoleId], [UserId], [UserId1])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
UPDATE [Users] SET [Email] = @p3, [Name] = @p4, [Password] = @p5
OUTPUT 1
WHERE [Id] = @p6;
2025-07-17 09:08:01.113 +04:00 [DBG] The foreign key property 'UserRole.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-07-17 09:08:01.126 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:01.132 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 23ms reading results.
2025-07-17 09:08:01.144 +04:00 [DBG] Committing transaction.
2025-07-17 09:08:01.158 +04:00 [DBG] Committed transaction.
2025-07-17 09:08:01.169 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:01.175 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (6ms).
2025-07-17 09:08:01.189 +04:00 [DBG] Disposing transaction.
2025-07-17 09:08:01.196 +04:00 [DBG] An entity of type 'UserRole' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:01.207 +04:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:01.220 +04:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-07-17 09:08:01.228 +04:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-07-17 09:08:01.234 +04:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-07-17 09:08:04.286 +04:00 [ERR] Exception Occured
System.Net.Mail.SmtpFailedRecipientException: User not local; please try a different path. The server response was: 5.5.1 Authentication is required to send mail
   at System.Net.Mail.SendMailAsyncResult.End(IAsyncResult result)
   at System.Net.Mail.SmtpClient.SendMailCallback(IAsyncResult result)
--- End of stack trace from previous location ---
   at OrderApp.Web.MailService.SendEmailAsync(String to, String subject, String body) in C:\Users\zakir\OneDrive\Masaüstü\Work\OrderApp\src\OrderApp.Web\MailService.cs:line 45
   at OrderApp.Web.Register.RegisterEndpointService.RegisterAsync(RegisterRequest req, CancellationToken ct) in C:\Users\zakir\OneDrive\Masaüstü\Work\OrderApp\src\OrderApp.Web\Register\RegisterEndpointService.cs:line 34
2025-07-17 09:08:04.303 +04:00 [ERR] Exception
System.InvalidOperationException: Registration failed.
   at OrderApp.Web.Register.ResgisterEndpoint.HandleAsync(RegisterRequest req, CancellationToken ct) in C:\Users\zakir\OneDrive\Masaüstü\Work\OrderApp\src\OrderApp.Web\Register\ResgisterEndpoint.cs:line 23
2025-07-17 09:08:04.313 +04:00 [INF] Executed endpoint 'HTTP: POST auth/Register'
2025-07-17 09:08:04.322 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/auth/Register  {
  "username": "vwwacng",
  "password": "string",
  "email": "ascasr@example.com"
} Responded with [400] in 4403ms
2025-07-17 09:08:04.333 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 09:08:04.341 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:04.350 +04:00 [DBG] Disposed connection to database '' on server '' (8ms).
2025-07-17 09:08:04.359 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/auth/Register - 400 207 application/json 4484.6797ms
2025-07-17 09:08:08.063 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/auth/Register - application/json 84
2025-07-17 09:08:08.071 +04:00 [DBG] 1 candidate(s) found for the request path '/auth/Register'
2025-07-17 09:08:08.075 +04:00 [DBG] Request matched endpoint 'HTTP: POST auth/Register'
2025-07-17 09:08:08.079 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 09:08:08.085 +04:00 [DBG] Connection id "0HNE4TUMGB74M", Request id "0HNE4TUMGB74M:00000003": started reading request body.
2025-07-17 09:08:08.092 +04:00 [DBG] Connection id "0HNE4TUMGB74M", Request id "0HNE4TUMGB74M:00000003": done reading request body.
2025-07-17 09:08:08.100 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-07-17 09:08:08.104 +04:00 [INF] Executing endpoint 'HTTP: POST auth/Register'
2025-07-17 09:08:08.119 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 09:08:08.133 +04:00 [DBG] Creating DbConnection.
2025-07-17 09:08:08.138 +04:00 [DBG] Created DbConnection. (5ms).
2025-07-17 09:08:08.144 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:08.152 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:08.158 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 09:08:08.165 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-07-17 09:08:08.209 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (50ms).
2025-07-17 09:08:08.275 +04:00 [DBG] Executing DbCommand [Parameters=[@__mail_0='?' (Size = 4000), @__name_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Name], [u].[Password]
FROM [Users] AS [u]
WHERE [u].[Email] = @__mail_0 OR [u].[Name] = @__name_1
2025-07-17 09:08:08.332 +04:00 [INF] Executed DbCommand (57ms) [Parameters=[@__mail_0='?' (Size = 4000), @__name_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Name], [u].[Password]
FROM [Users] AS [u]
WHERE [u].[Email] = @__mail_0 OR [u].[Name] = @__name_1
2025-07-17 09:08:08.339 +04:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:08.342 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:08.347 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 8ms reading results.
2025-07-17 09:08:08.372 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:08.375 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (3ms).
2025-07-17 09:08:08.381 +04:00 [ERR] Already Exsisting User
System.InvalidOperationException: User already exists.
   at OrderApp.Web.Register.RegisterEndpointService.RegisterAsync(RegisterRequest req, CancellationToken ct) in C:\Users\zakir\OneDrive\Masaüstü\Work\OrderApp\src\OrderApp.Web\Register\RegisterEndpointService.cs:line 23
2025-07-17 09:08:08.384 +04:00 [ERR] Exception
System.InvalidOperationException: Registration failed.
   at OrderApp.Web.Register.ResgisterEndpoint.HandleAsync(RegisterRequest req, CancellationToken ct) in C:\Users\zakir\OneDrive\Masaüstü\Work\OrderApp\src\OrderApp.Web\Register\ResgisterEndpoint.cs:line 23
2025-07-17 09:08:08.387 +04:00 [INF] Executed endpoint 'HTTP: POST auth/Register'
2025-07-17 09:08:08.390 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/auth/Register  {
  "username": "vwwacng",
  "password": "string",
  "email": "ascasr@example.com"
} Responded with [400] in 305ms
2025-07-17 09:08:08.395 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 09:08:08.400 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:08.405 +04:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-07-17 09:08:08.409 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/auth/Register - 400 207 application/json 346.2383ms
2025-07-17 09:08:14.148 +04:00 [DBG] Connection id "0HNE4TUMGB74M" received FIN.
2025-07-17 09:08:14.156 +04:00 [DBG] Connection id "0HNE4TUMGB74M" is closed. The last processed stream ID was 3.
2025-07-17 09:08:14.156 +04:00 [DBG] Connection id "0HNE4TUMGB74M" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-07-17 09:08:14.171 +04:00 [DBG] The connection queue processing loop for 0HNE4TUMGB74M completed.
2025-07-17 09:08:14.179 +04:00 [DBG] Connection id "0HNE4TUMGB74M" stopped.
2025-07-17 09:08:15.602 +04:00 [DBG] Connection id "0HNE4TUMGB74N" accepted.
2025-07-17 09:08:15.608 +04:00 [DBG] Connection id "0HNE4TUMGB74N" started.
2025-07-17 09:08:15.624 +04:00 [DBG] Connection 0HNE4TUMGB74N established using the following protocol: "Tls13"
2025-07-17 09:08:15.631 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/auth/Register - application/json 82
2025-07-17 09:08:15.638 +04:00 [DBG] 1 candidate(s) found for the request path '/auth/Register'
2025-07-17 09:08:15.646 +04:00 [DBG] Request matched endpoint 'HTTP: POST auth/Register'
2025-07-17 09:08:15.652 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 09:08:15.656 +04:00 [DBG] Connection id "0HNE4TUMGB74N", Request id "0HNE4TUMGB74N:00000001": started reading request body.
2025-07-17 09:08:15.661 +04:00 [DBG] Connection id "0HNE4TUMGB74N", Request id "0HNE4TUMGB74N:00000001": done reading request body.
2025-07-17 09:08:15.667 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-07-17 09:08:15.669 +04:00 [INF] Executing endpoint 'HTTP: POST auth/Register'
2025-07-17 09:08:15.674 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 09:08:15.684 +04:00 [DBG] Creating DbConnection.
2025-07-17 09:08:15.687 +04:00 [DBG] Created DbConnection. (2ms).
2025-07-17 09:08:15.690 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:15.695 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:15.700 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 09:08:15.703 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-07-17 09:08:15.707 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-07-17 09:08:15.716 +04:00 [DBG] Executing DbCommand [Parameters=[@__mail_0='?' (Size = 4000), @__name_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Name], [u].[Password]
FROM [Users] AS [u]
WHERE [u].[Email] = @__mail_0 OR [u].[Name] = @__name_1
2025-07-17 09:08:15.740 +04:00 [INF] Executed DbCommand (24ms) [Parameters=[@__mail_0='?' (Size = 4000), @__name_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Name], [u].[Password]
FROM [Users] AS [u]
WHERE [u].[Email] = @__mail_0 OR [u].[Name] = @__name_1
2025-07-17 09:08:15.752 +04:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:15.760 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:15.766 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 14ms reading results.
2025-07-17 09:08:15.772 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:15.778 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (5ms).
2025-07-17 09:08:15.784 +04:00 [ERR] Already Exsisting User
System.InvalidOperationException: User already exists.
   at OrderApp.Web.Register.RegisterEndpointService.RegisterAsync(RegisterRequest req, CancellationToken ct) in C:\Users\zakir\OneDrive\Masaüstü\Work\OrderApp\src\OrderApp.Web\Register\RegisterEndpointService.cs:line 23
2025-07-17 09:08:15.788 +04:00 [ERR] Exception
System.InvalidOperationException: Registration failed.
   at OrderApp.Web.Register.ResgisterEndpoint.HandleAsync(RegisterRequest req, CancellationToken ct) in C:\Users\zakir\OneDrive\Masaüstü\Work\OrderApp\src\OrderApp.Web\Register\ResgisterEndpoint.cs:line 23
2025-07-17 09:08:15.794 +04:00 [INF] Executed endpoint 'HTTP: POST auth/Register'
2025-07-17 09:08:15.798 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/auth/Register  {
  "username": "vwwacng",
  "password": "string",
  "email": "ascasr@cdple.com"
} Responded with [400] in 142ms
2025-07-17 09:08:15.801 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 09:08:15.804 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:15.807 +04:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-07-17 09:08:15.812 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/auth/Register - 400 207 application/json 181.2222ms
2025-07-17 09:08:24.194 +04:00 [DBG] Connection id "0HNE4TUMGB74N" received FIN.
2025-07-17 09:08:24.218 +04:00 [DBG] Connection id "0HNE4TUMGB74N" is closed. The last processed stream ID was 1.
2025-07-17 09:08:24.218 +04:00 [DBG] The connection queue processing loop for 0HNE4TUMGB74N completed.
2025-07-17 09:08:24.228 +04:00 [DBG] Connection id "0HNE4TUMGB74N" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-07-17 09:08:24.249 +04:00 [DBG] Connection id "0HNE4TUMGB74N" stopped.
2025-07-17 09:08:26.706 +04:00 [DBG] Connection id "0HNE4TUMGB74O" accepted.
2025-07-17 09:08:26.713 +04:00 [DBG] Connection id "0HNE4TUMGB74O" started.
2025-07-17 09:08:26.728 +04:00 [DBG] Connection 0HNE4TUMGB74O established using the following protocol: "Tls13"
2025-07-17 09:08:29.106 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/Users - null null
2025-07-17 09:08:29.112 +04:00 [DBG] 1 candidate(s) found for the request path '/Users'
2025-07-17 09:08:29.114 +04:00 [DBG] Request matched endpoint 'HTTP: GET /Users'
2025-07-17 09:08:29.118 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 09:08:29.122 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-07-17 09:08:29.127 +04:00 [INF] Executing endpoint 'HTTP: GET /Users'
2025-07-17 09:08:29.172 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 09:08:29.196 +04:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(u => u.Roles)'
2025-07-17 09:08:29.222 +04:00 [DBG] Including navigation: 'User.Roles'.
2025-07-17 09:08:29.419 +04:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<User>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Email (string) Required, 1], [Property: User.Name (string) Required, 2], [Property: User.Password (string) Required, 3] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: UserRole.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 4], [Property: UserRole.RoleId (int) Required FK Index, 5], [Property: UserRole.UserId (int) Required FK Index, 6], [Property: UserRole.UserId1 (no field, int?) Shadow FK Index, 7] }
            3 -> 4
        SELECT u.Id, u.Email, u.Name, u.Password, u0.Id, u0.RoleId, u0.UserId, u0.UserId1
        FROM Users AS u
        LEFT JOIN UserRoles AS u0 ON u.Id == u0.UserId
        ORDER BY u.Id ASC) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Email (string) Required, 1], [Property: User.Name (string) Required, 2], [Property: User.Password (string) Required, 3] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: UserRole.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 4], [Property: UserRole.RoleId (int) Required FK Index, 5], [Property: UserRole.UserId (int) Required FK Index, 6], [Property: UserRole.UserId1 (no field, int?) Shadow FK Index, 7] }
            3 -> 4
        SELECT u.Id, u.Email, u.Name, u.Password, u0.Id, u0.RoleId, u0.UserId, u0.UserId1
        FROM Users AS u
        LEFT JOIN UserRoles AS u0 ON u.Id == u0.UserId
        ORDER BY u.Id ASC, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        resultContext.Values == null ? 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Email>k__BackingField = dataReader.GetString(1);
                                    instance.<Name>k__BackingField = dataReader.GetString(2);
                                    instance.<Password>k__BackingField = dataReader.GetString(3);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            resultContext.Values = new object[]{ entity };
            ShaperProcessingExpressionVisitor.InitializeIncludeCollection<User, User>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                entity: (User)(resultContext.Values[0]), 
                parentIdentifier: (queryContext, dataReader) => new object[]{ (object)(int?)dataReader.GetInt32(0) }, 
                outerIdentifier: (queryContext, dataReader) => new object[]{ (object)(int?)dataReader.GetInt32(0) }, 
                navigation: [LIFTABLE Constant: Navigation: User.Roles (List<UserRole>) Collection ToDependent UserRole | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User").FindNavigation("Roles")], 
                clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<User, List<UserRole>, UserRole> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User").FindNavigation("Roles").GetCollectionAccessor()], 
                trackingQuery: True, 
                setLoaded: True);
        } : default(void);
        ShaperProcessingExpressionVisitor.PopulateIncludeCollection<User, UserRole>(
            collectionId: 0, 
            queryContext: queryContext, 
            dbDataReader: dataReader, 
            resultCoordinator: resultCoordinator, 
            parentIdentifier: (queryContext, dataReader) => new object[]{ (object)(int?)dataReader.GetInt32(0) }, 
            outerIdentifier: (queryContext, dataReader) => new object[]{ (object)(int?)dataReader.GetInt32(0) }, 
            selfIdentifier: (queryContext, dataReader) => new object[]{ (object)dataReader.IsDBNull(4) ? default(int?) : (int?)dataReader.GetInt32(4) }, 
            parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (int)left == (int)right }], 
            outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (int)left == (int)right }], 
            selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (int)left == (int)right }], 
            innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                UserRole entity;
                entity = 
                {
                    MaterializationContext materializationContext2;
                    IEntityType entityType2;
                    UserRole instance2;
                    InternalEntityEntry entry2;
                    bool hasNullKey2;
                    materializationContext2 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance2 = default(UserRole);
                    entry2 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: UserRole.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.UserRole").FindPrimaryKey()], 
                        keyValues: new object[]{ dataReader.IsDBNull(4) ? default(object) : (object)dataReader.GetInt32(4) }, 
                        throwOnNullKey: False, 
                        hasNullKey: hasNullKey2);
                    !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                    {
                        entityType2 = entry2.EntityType;
                        return instance2 = (UserRole)entry2.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot2;
                        shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType2 = [LIFTABLE Constant: EntityType: UserRole | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.UserRole")];
                        instance2 = switch (entityType2)
                        {
                            case [LIFTABLE Constant: EntityType: UserRole | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.UserRole")]: 
                                {
                                    shadowSnapshot2 = (ISnapshot)new Snapshot<int?>(dataReader.IsDBNull(7) ? default(int?) : (int?)dataReader.GetInt32(7));
                                    return 
                                    {
                                        UserRole instance;
                                        instance = new UserRole();
                                        instance.<Id>k__BackingField = dataReader.IsDBNull(4) ? default(int) : dataReader.GetInt32(4);
                                        instance.<RoleId>k__BackingField = dataReader.IsDBNull(5) ? default(int) : dataReader.GetInt32(5);
                                        instance.<UserId>k__BackingField = dataReader.IsDBNull(6) ? default(int) : dataReader.GetInt32(6);
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext2.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: UserRole | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.UserRole")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(UserRole)
                        }
                        ;
                        entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType2, 
                            entity: instance2, 
                            snapshot: shadowSnapshot2);
                        return instance2;
                    } : default(void);
                    return instance2;
                };
                return entity;
            }, 
            inverseNavigation: default(INavigationBase), 
            fixup: (namelessParameter{8}, namelessParameter{9}) => 
            {
                return [LIFTABLE Constant: ClrICollectionAccessor<User, List<UserRole>, UserRole> | Resolver: namelessParameter{10} => namelessParameter{10}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User").FindNavigation("Roles").GetCollectionAccessor()].Add(
                    entity: namelessParameter{8}, 
                    value: namelessParameter{9}, 
                    forMaterialization: True);
            }, 
            trackingQuery: True);
        return IsTrue(resultCoordinator.ResultReady)
         ? (User)(resultContext.Values[0]) : default(User);
    }, 
    contextType: OrderApp.Infrastructure.Data.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-07-17 09:08:29.518 +04:00 [DBG] Creating DbConnection.
2025-07-17 09:08:29.520 +04:00 [DBG] Created DbConnection. (2ms).
2025-07-17 09:08:29.522 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:29.526 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:29.530 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 09:08:29.533 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-07-17 09:08:29.535 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-07-17 09:08:29.538 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Email], [u].[Name], [u].[Password], [u0].[Id], [u0].[RoleId], [u0].[UserId], [u0].[UserId1]
FROM [Users] AS [u]
LEFT JOIN [UserRoles] AS [u0] ON [u].[Id] = [u0].[UserId]
ORDER BY [u].[Id]
2025-07-17 09:08:29.577 +04:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Email], [u].[Name], [u].[Password], [u0].[Id], [u0].[RoleId], [u0].[UserId], [u0].[UserId1]
FROM [Users] AS [u]
LEFT JOIN [UserRoles] AS [u0] ON [u].[Id] = [u0].[UserId]
ORDER BY [u].[Id]
2025-07-17 09:08:29.589 +04:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.617 +04:00 [DBG] Context 'AppDbContext' started tracking 'UserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.641 +04:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.651 +04:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.660 +04:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.669 +04:00 [DBG] Context 'AppDbContext' started tracking 'UserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.679 +04:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.687 +04:00 [DBG] Context 'AppDbContext' started tracking 'UserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.698 +04:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.707 +04:00 [DBG] Context 'AppDbContext' started tracking 'UserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.717 +04:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.724 +04:00 [DBG] Context 'AppDbContext' started tracking 'UserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.734 +04:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.742 +04:00 [DBG] Context 'AppDbContext' started tracking 'UserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.752 +04:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.762 +04:00 [DBG] Context 'AppDbContext' started tracking 'UserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.772 +04:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.782 +04:00 [DBG] Context 'AppDbContext' started tracking 'UserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.793 +04:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.799 +04:00 [DBG] Context 'AppDbContext' started tracking 'UserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.803 +04:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.807 +04:00 [DBG] Context 'AppDbContext' started tracking 'UserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.812 +04:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.817 +04:00 [DBG] Context 'AppDbContext' started tracking 'UserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.823 +04:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.829 +04:00 [DBG] Context 'AppDbContext' started tracking 'UserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.835 +04:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.841 +04:00 [DBG] Context 'AppDbContext' started tracking 'UserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:08:29.848 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:29.855 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 268ms reading results.
2025-07-17 09:08:29.863 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:29.871 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (7ms).
2025-07-17 09:08:30.038 +04:00 [INF] Executed endpoint 'HTTP: GET /Users'
2025-07-17 09:08:30.129 +04:00 [INF] Source:[::1] Request: GET https localhost:57679/Users   Responded with [200] in 1007ms
2025-07-17 09:08:30.134 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 09:08:30.140 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:08:30.149 +04:00 [DBG] Disposed connection to database '' on server '' (8ms).
2025-07-17 09:08:30.161 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/Users - 200 2305 application/json 1055.3529ms
2025-07-17 09:08:34.200 +04:00 [DBG] Connection id "0HNE4TUMGB74O" received FIN.
2025-07-17 09:08:34.208 +04:00 [DBG] Connection id "0HNE4TUMGB74O" is closed. The last processed stream ID was 1.
2025-07-17 09:08:34.208 +04:00 [DBG] The connection queue processing loop for 0HNE4TUMGB74O completed.
2025-07-17 09:08:34.215 +04:00 [DBG] Connection id "0HNE4TUMGB74O" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-07-17 09:08:34.246 +04:00 [DBG] Connection id "0HNE4TUMGB74O" stopped.
2025-07-17 09:12:17.436 +04:00 [INF] Application is shutting down...
2025-07-17 09:12:17.440 +04:00 [DBG] Hosting stopping
2025-07-17 09:12:17.473 +04:00 [DBG] Hosting stopped
2025-07-17 09:12:35.294 +04:00 [INF] Starting web host
2025-07-17 09:12:35.701 +04:00 [INF] Options were configured
2025-07-17 09:12:35.710 +04:00 [INF] Infrastructure services registered
2025-07-17 09:12:35.740 +04:00 [INF] Mediatr and Email Sender services registered
2025-07-17 09:12:36.470 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-07-17 09:12:37.980 +04:00 [DBG] The property 'PhoneNumber.ContributorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-07-17 09:12:37.989 +04:00 [WRN] The foreign key property 'UserRole.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-17 09:12:38.054 +04:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-17 09:12:38.166 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 09:12:38.198 +04:00 [DBG] Creating DbConnection.
2025-07-17 09:12:38.289 +04:00 [DBG] Created DbConnection. (84ms).
2025-07-17 09:12:38.317 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:12:38.724 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:12:38.745 +04:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-07-17 09:12:38.773 +04:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (21ms).
2025-07-17 09:12:38.785 +04:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (47ms).
2025-07-17 09:12:38.818 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-17 09:12:38.943 +04:00 [INF] Executed DbCommand (125ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-17 09:12:38.952 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:12:38.968 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (11ms).
2025-07-17 09:12:38.982 +04:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-07-17 09:12:38.985 +04:00 [DBG] Created DbCommand for 'ExecuteScalar' (3ms).
2025-07-17 09:12:38.987 +04:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (5ms).
2025-07-17 09:12:38.989 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:12:38.993 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:12:38.999 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-07-17 09:12:39.119 +04:00 [INF] Executed DbCommand (120ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-07-17 09:12:39.126 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:12:39.131 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (4ms).
2025-07-17 09:12:39.147 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 09:12:39.155 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:12:39.164 +04:00 [DBG] Disposed connection to database '' on server '' (5ms).
2025-07-17 09:12:39.249 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-07-17 09:12:39.298 +04:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-17 09:12:39.645 +04:00 [INF] Registered 29 endpoints in 3,888 milliseconds.
2025-07-17 09:12:39.823 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 09:12:39.885 +04:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any()'
2025-07-17 09:12:40.214 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: OrderApp.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-07-17 09:12:40.277 +04:00 [DBG] Creating DbConnection.
2025-07-17 09:12:40.280 +04:00 [DBG] Created DbConnection. (3ms).
2025-07-17 09:12:40.283 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:12:40.286 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:12:40.288 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 09:12:40.290 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-07-17 09:12:40.295 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-07-17 09:12:40.298 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-17 09:12:40.303 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-17 09:12:40.326 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:12:40.332 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 20ms reading results.
2025-07-17 09:12:40.338 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:12:40.343 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (4ms).
2025-07-17 09:12:40.349 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 09:12:40.353 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:12:40.358 +04:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-07-17 09:12:40.365 +04:00 [DBG] Hosting starting
2025-07-17 09:12:40.398 +04:00 [INF] User profile is available. Using 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-17 09:12:40.450 +04:00 [DBG] Reading data from file 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys\key-d76fcede-8a6f-46d5-9032-13cac50778bc.xml'.
2025-07-17 09:12:40.464 +04:00 [DBG] Found key {d76fcede-8a6f-46d5-9032-13cac50778bc}.
2025-07-17 09:12:40.497 +04:00 [DBG] Considering key {d76fcede-8a6f-46d5-9032-13cac50778bc} with expiration date 2025-08-04 16:06:59Z as default key.
2025-07-17 09:12:40.508 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-07-17 09:12:40.520 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-07-17 09:12:40.528 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-07-17 09:12:40.544 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-07-17 09:12:40.552 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-07-17 09:12:40.563 +04:00 [DBG] Using key {d76fcede-8a6f-46d5-9032-13cac50778bc} as the default key.
2025-07-17 09:12:40.569 +04:00 [DBG] Key ring with default key {d76fcede-8a6f-46d5-9032-13cac50778bc} was loaded during application startup.
2025-07-17 09:12:40.658 +04:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-07-17 09:12:40.661 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-07-17 09:12:40.773 +04:00 [INF] Now listening on: https://localhost:57679
2025-07-17 09:12:40.777 +04:00 [DBG] Loaded hosting startup assembly OrderApp.Web
2025-07-17 09:12:40.781 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-17 09:12:40.783 +04:00 [INF] Hosting environment: Development
2025-07-17 09:12:40.786 +04:00 [INF] Content root path: C:\Users\zakir\OneDrive\Masaüstü\Work\OrderApp\src\OrderApp.Web
2025-07-17 09:12:40.790 +04:00 [DBG] Hosting started
2025-07-17 09:16:04.922 +04:00 [DBG] Config reload token fired. Checking for changes...
2025-07-17 09:16:04.932 +04:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-07-17 09:16:04.938 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-07-17 09:16:05.197 +04:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-07-17 09:16:05.203 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-07-17 09:16:05.210 +04:00 [DBG] Config reload token fired. Checking for changes...
2025-07-17 09:16:12.099 +04:00 [DBG] Connection id "0HNE4U45T4MAP" accepted.
2025-07-17 09:16:12.103 +04:00 [DBG] Connection id "0HNE4U45T4MAP" started.
2025-07-17 09:16:12.185 +04:00 [DBG] Connection 0HNE4U45T4MAP established using the following protocol: "Tls13"
2025-07-17 09:16:12.364 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/auth/Register - application/json 82
2025-07-17 09:16:12.642 +04:00 [DBG] 1 candidate(s) found for the request path '/auth/Register'
2025-07-17 09:16:12.653 +04:00 [DBG] Request matched endpoint 'HTTP: POST auth/Register'
2025-07-17 09:16:12.827 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 09:16:12.880 +04:00 [DBG] Connection id "0HNE4U45T4MAP", Request id "0HNE4U45T4MAP:00000001": started reading request body.
2025-07-17 09:16:12.890 +04:00 [DBG] Connection id "0HNE4U45T4MAP", Request id "0HNE4U45T4MAP:00000001": done reading request body.
2025-07-17 09:16:12.921 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-07-17 09:16:12.932 +04:00 [INF] Executing endpoint 'HTTP: POST auth/Register'
2025-07-17 09:16:13.563 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 09:16:13.641 +04:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Where(u => u.Email == __mail_0 || u.Name == __name_1)
    .FirstOrDefault()'
2025-07-17 09:16:13.927 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Email (string) Required, 1], [Property: User.Name (string) Required, 2], [Property: User.Password (string) Required, 3] }
            SELECT TOP(1) u.Id, u.Email, u.Name, u.Password
            FROM Users AS u
            WHERE (u.Email == @__mail_0) || (u.Name == @__name_1)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Email (string) Required, 1], [Property: User.Name (string) Required, 2], [Property: User.Password (string) Required, 3] }
            SELECT TOP(1) u.Id, u.Email, u.Name, u.Password
            FROM Users AS u
            WHERE (u.Email == @__mail_0) || (u.Name == @__name_1), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Email>k__BackingField = dataReader.GetString(1);
                                    instance.<Name>k__BackingField = dataReader.GetString(2);
                                    instance.<Password>k__BackingField = dataReader.GetString(3);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: OrderApp.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-07-17 09:16:13.991 +04:00 [DBG] Creating DbConnection.
2025-07-17 09:16:13.996 +04:00 [DBG] Created DbConnection. (4ms).
2025-07-17 09:16:14.003 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:16:14.012 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:16:14.022 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 09:16:14.032 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (9ms).
2025-07-17 09:16:14.054 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (32ms).
2025-07-17 09:16:14.074 +04:00 [DBG] Executing DbCommand [Parameters=[@__mail_0='?' (Size = 4000), @__name_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Name], [u].[Password]
FROM [Users] AS [u]
WHERE [u].[Email] = @__mail_0 OR [u].[Name] = @__name_1
2025-07-17 09:16:14.165 +04:00 [INF] Executed DbCommand (100ms) [Parameters=[@__mail_0='?' (Size = 4000), @__name_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Name], [u].[Password]
FROM [Users] AS [u]
WHERE [u].[Email] = @__mail_0 OR [u].[Name] = @__name_1
2025-07-17 09:16:14.399 +04:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:16:14.481 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:16:14.490 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 312ms reading results.
2025-07-17 09:16:14.500 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:16:14.506 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (5ms).
2025-07-17 09:16:14.520 +04:00 [ERR] Already Exsisting User
System.InvalidOperationException: User already exists.
   at OrderApp.Web.Register.RegisterEndpointService.RegisterAsync(RegisterRequest req, CancellationToken ct) in C:\Users\zakir\OneDrive\Masaüstü\Work\OrderApp\src\OrderApp.Web\Register\RegisterEndpointService.cs:line 23
2025-07-17 09:16:14.621 +04:00 [ERR] Exception
System.InvalidOperationException: Registration failed.
   at OrderApp.Web.Register.ResgisterEndpoint.HandleAsync(RegisterRequest req, CancellationToken ct) in C:\Users\zakir\OneDrive\Masaüstü\Work\OrderApp\src\OrderApp.Web\Register\ResgisterEndpoint.cs:line 23
2025-07-17 09:16:14.681 +04:00 [INF] Executed endpoint 'HTTP: POST auth/Register'
2025-07-17 09:16:15.247 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/auth/Register  {
  "username": "vwwacng",
  "password": "string",
  "email": "ascasr@cdple.com"
} Responded with [400] in 2345ms
2025-07-17 09:16:15.283 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 09:16:15.301 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:16:15.310 +04:00 [DBG] Disposed connection to database '' on server '' (8ms).
2025-07-17 09:16:15.321 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/auth/Register - 400 150 application/json 2966.3344ms
2025-07-17 09:16:24.697 +04:00 [DBG] Connection id "0HNE4U45T4MAP" received FIN.
2025-07-17 09:16:24.709 +04:00 [DBG] Connection id "0HNE4U45T4MAP" is closed. The last processed stream ID was 1.
2025-07-17 09:16:24.715 +04:00 [DBG] The connection queue processing loop for 0HNE4U45T4MAP completed.
2025-07-17 09:16:24.718 +04:00 [DBG] Connection id "0HNE4U45T4MAP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-07-17 09:16:24.748 +04:00 [DBG] Connection id "0HNE4U45T4MAP" stopped.
2025-07-17 09:19:39.240 +04:00 [INF] Application is shutting down...
2025-07-17 09:19:39.243 +04:00 [DBG] Hosting stopping
2025-07-17 09:19:39.276 +04:00 [DBG] Hosting stopped
2025-07-17 09:19:48.244 +04:00 [INF] Starting web host
2025-07-17 09:19:48.533 +04:00 [INF] Options were configured
2025-07-17 09:19:48.541 +04:00 [INF] Infrastructure services registered
2025-07-17 09:19:48.561 +04:00 [INF] Mediatr and Email Sender services registered
2025-07-17 09:19:49.283 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-07-17 09:19:50.054 +04:00 [DBG] The property 'PhoneNumber.ContributorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-07-17 09:19:50.064 +04:00 [WRN] The foreign key property 'UserRole.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-17 09:19:50.181 +04:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-17 09:19:50.311 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 09:19:50.336 +04:00 [DBG] Creating DbConnection.
2025-07-17 09:19:50.415 +04:00 [DBG] Created DbConnection. (71ms).
2025-07-17 09:19:50.434 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:19:50.960 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:19:50.988 +04:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-07-17 09:19:51.001 +04:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (14ms).
2025-07-17 09:19:51.006 +04:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (24ms).
2025-07-17 09:19:51.017 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-17 09:19:51.095 +04:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-17 09:19:51.113 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:19:51.137 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (17ms).
2025-07-17 09:19:51.163 +04:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-07-17 09:19:51.171 +04:00 [DBG] Created DbCommand for 'ExecuteScalar' (9ms).
2025-07-17 09:19:51.181 +04:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (19ms).
2025-07-17 09:19:51.190 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:19:51.205 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:19:51.218 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-07-17 09:19:51.406 +04:00 [INF] Executed DbCommand (188ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-07-17 09:19:51.425 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:19:51.433 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (8ms).
2025-07-17 09:19:51.455 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 09:19:51.470 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:19:51.484 +04:00 [DBG] Disposed connection to database '' on server '' (13ms).
2025-07-17 09:19:51.636 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-07-17 09:19:51.761 +04:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-17 09:19:52.460 +04:00 [INF] Registered 29 endpoints in 3,885 milliseconds.
2025-07-17 09:19:52.895 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 09:19:53.033 +04:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any()'
2025-07-17 09:19:53.725 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: OrderApp.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-07-17 09:19:53.842 +04:00 [DBG] Creating DbConnection.
2025-07-17 09:19:53.850 +04:00 [DBG] Created DbConnection. (7ms).
2025-07-17 09:19:53.859 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:19:53.868 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:19:53.875 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 09:19:53.882 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-07-17 09:19:53.888 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2025-07-17 09:19:53.899 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-17 09:19:53.919 +04:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-17 09:19:53.971 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:19:53.988 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 50ms reading results.
2025-07-17 09:19:54.002 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:19:54.014 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (11ms).
2025-07-17 09:19:54.026 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 09:19:54.035 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:19:54.045 +04:00 [DBG] Disposed connection to database '' on server '' (9ms).
2025-07-17 09:19:54.061 +04:00 [DBG] Hosting starting
2025-07-17 09:19:54.112 +04:00 [INF] User profile is available. Using 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-17 09:19:54.211 +04:00 [DBG] Reading data from file 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys\key-d76fcede-8a6f-46d5-9032-13cac50778bc.xml'.
2025-07-17 09:19:54.230 +04:00 [DBG] Found key {d76fcede-8a6f-46d5-9032-13cac50778bc}.
2025-07-17 09:19:54.272 +04:00 [DBG] Considering key {d76fcede-8a6f-46d5-9032-13cac50778bc} with expiration date 2025-08-04 16:06:59Z as default key.
2025-07-17 09:19:54.288 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-07-17 09:19:54.297 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-07-17 09:19:54.306 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-07-17 09:19:54.326 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-07-17 09:19:54.351 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-07-17 09:19:54.366 +04:00 [DBG] Using key {d76fcede-8a6f-46d5-9032-13cac50778bc} as the default key.
2025-07-17 09:19:54.396 +04:00 [DBG] Key ring with default key {d76fcede-8a6f-46d5-9032-13cac50778bc} was loaded during application startup.
2025-07-17 09:19:54.483 +04:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-07-17 09:19:54.489 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-07-17 09:19:54.601 +04:00 [INF] Now listening on: https://localhost:57679
2025-07-17 09:19:54.604 +04:00 [DBG] Loaded hosting startup assembly OrderApp.Web
2025-07-17 09:19:54.606 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-17 09:19:54.607 +04:00 [INF] Hosting environment: Development
2025-07-17 09:19:54.609 +04:00 [INF] Content root path: C:\Users\zakir\OneDrive\Masaüstü\Work\OrderApp\src\OrderApp.Web
2025-07-17 09:19:54.610 +04:00 [DBG] Hosting started
2025-07-17 09:19:57.251 +04:00 [DBG] Connection id "0HNE4U690C0HJ" accepted.
2025-07-17 09:19:57.262 +04:00 [DBG] Connection id "0HNE4U690C0HJ" started.
2025-07-17 09:19:57.398 +04:00 [DBG] Connection 0HNE4U690C0HJ established using the following protocol: "Tls13"
2025-07-17 09:19:57.548 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2025-07-17 09:19:57.729 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-07-17 09:19:57.735 +04:00 [DBG] Request did not match any endpoints
2025-07-17 09:19:57.792 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 09:19:58.026 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html; charset=utf-8 484.5349ms
2025-07-17 09:19:59.060 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2025-07-17 09:19:59.070 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-07-17 09:19:59.072 +04:00 [DBG] Request did not match any endpoints
2025-07-17 09:19:59.077 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 09:19:59.095 +04:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-07-17 09:19:59.192 +04:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-07-17 09:20:01.538 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json; charset=utf-8 2476.703ms
2025-07-17 09:20:05.073 +04:00 [DBG] Connection id "0HNE4U690C0HJ" received FIN.
2025-07-17 09:20:05.085 +04:00 [DBG] Connection id "0HNE4U690C0HJ" is closed. The last processed stream ID was 3.
2025-07-17 09:20:05.085 +04:00 [DBG] The connection queue processing loop for 0HNE4U690C0HJ completed.
2025-07-17 09:20:05.094 +04:00 [DBG] Connection id "0HNE4U690C0HJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-07-17 09:20:05.135 +04:00 [DBG] Connection id "0HNE4U690C0HJ" stopped.
2025-07-17 09:20:06.970 +04:00 [DBG] Connection id "0HNE4U690C0HK" accepted.
2025-07-17 09:20:06.977 +04:00 [DBG] Connection id "0HNE4U690C0HK" started.
2025-07-17 09:20:06.993 +04:00 [DBG] Connection 0HNE4U690C0HK established using the following protocol: "Tls13"
2025-07-17 09:20:10.205 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/auth/Register - application/json 81
2025-07-17 09:20:10.224 +04:00 [DBG] 1 candidate(s) found for the request path '/auth/Register'
2025-07-17 09:20:10.230 +04:00 [DBG] Request matched endpoint 'HTTP: POST auth/Register'
2025-07-17 09:20:10.238 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 09:20:10.261 +04:00 [DBG] Connection id "0HNE4U690C0HK", Request id "0HNE4U690C0HK:00000001": started reading request body.
2025-07-17 09:20:10.271 +04:00 [DBG] Connection id "0HNE4U690C0HK", Request id "0HNE4U690C0HK:00000001": done reading request body.
2025-07-17 09:20:10.283 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-07-17 09:20:10.291 +04:00 [INF] Executing endpoint 'HTTP: POST auth/Register'
2025-07-17 09:20:10.792 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 09:20:10.872 +04:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Where(u => u.Email == __mail_0 || u.Name == __name_1)
    .FirstOrDefault()'
2025-07-17 09:20:11.159 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Email (string) Required, 1], [Property: User.Name (string) Required, 2], [Property: User.Password (string) Required, 3] }
            SELECT TOP(1) u.Id, u.Email, u.Name, u.Password
            FROM Users AS u
            WHERE (u.Email == @__mail_0) || (u.Name == @__name_1)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Email (string) Required, 1], [Property: User.Name (string) Required, 2], [Property: User.Password (string) Required, 3] }
            SELECT TOP(1) u.Id, u.Email, u.Name, u.Password
            FROM Users AS u
            WHERE (u.Email == @__mail_0) || (u.Name == @__name_1), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Email>k__BackingField = dataReader.GetString(1);
                                    instance.<Name>k__BackingField = dataReader.GetString(2);
                                    instance.<Password>k__BackingField = dataReader.GetString(3);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: OrderApp.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-07-17 09:20:11.277 +04:00 [DBG] Creating DbConnection.
2025-07-17 09:20:11.280 +04:00 [DBG] Created DbConnection. (2ms).
2025-07-17 09:20:11.283 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:20:11.287 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:20:11.290 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 09:20:11.294 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-07-17 09:20:11.306 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (15ms).
2025-07-17 09:20:11.321 +04:00 [DBG] Executing DbCommand [Parameters=[@__mail_0='?' (Size = 4000), @__name_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Name], [u].[Password]
FROM [Users] AS [u]
WHERE [u].[Email] = @__mail_0 OR [u].[Name] = @__name_1
2025-07-17 09:20:11.395 +04:00 [INF] Executed DbCommand (83ms) [Parameters=[@__mail_0='?' (Size = 4000), @__name_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Name], [u].[Password]
FROM [Users] AS [u]
WHERE [u].[Email] = @__mail_0 OR [u].[Name] = @__name_1
2025-07-17 09:20:11.576 +04:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:20:11.659 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:20:11.670 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 266ms reading results.
2025-07-17 09:20:11.682 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:20:11.691 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (9ms).
2025-07-17 09:20:11.706 +04:00 [ERR] Already Exsisting User
System.InvalidOperationException: User already exists.
   at OrderApp.Web.Register.RegisterEndpointService.RegisterAsync(RegisterRequest req, CancellationToken ct) in C:\Users\zakir\OneDrive\Masaüstü\Work\OrderApp\src\OrderApp.Web\Register\RegisterEndpointService.cs:line 23
2025-07-17 09:20:11.760 +04:00 [ERR] Exception
System.InvalidOperationException: User already exists.
   at OrderApp.Web.Register.ResgisterEndpoint.HandleAsync(RegisterRequest req, CancellationToken ct) in C:\Users\zakir\OneDrive\Masaüstü\Work\OrderApp\src\OrderApp.Web\Register\ResgisterEndpoint.cs:line 23
2025-07-17 09:20:11.817 +04:00 [INF] Executed endpoint 'HTTP: POST auth/Register'
2025-07-17 09:20:11.973 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/auth/Register  {
  "username": "string",
  "password": "string",
  "email": "user@example.com"
} Responded with [400] in 1689ms
2025-07-17 09:20:11.984 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 09:20:12.003 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:20:12.014 +04:00 [DBG] Disposed connection to database '' on server '' (10ms).
2025-07-17 09:20:12.024 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/auth/Register - 400 150 application/json 1818.6388ms
2025-07-17 09:20:15.083 +04:00 [DBG] Connection id "0HNE4U690C0HK" received FIN.
2025-07-17 09:20:15.092 +04:00 [DBG] Connection id "0HNE4U690C0HK" is closed. The last processed stream ID was 1.
2025-07-17 09:20:15.093 +04:00 [DBG] The connection queue processing loop for 0HNE4U690C0HK completed.
2025-07-17 09:20:15.102 +04:00 [DBG] Connection id "0HNE4U690C0HK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-07-17 09:20:15.128 +04:00 [DBG] Connection id "0HNE4U690C0HK" stopped.
2025-07-17 09:20:27.340 +04:00 [DBG] Connection id "0HNE4U690C0HL" accepted.
2025-07-17 09:20:27.345 +04:00 [DBG] Connection id "0HNE4U690C0HL" started.
2025-07-17 09:20:27.365 +04:00 [DBG] Connection 0HNE4U690C0HL established using the following protocol: "Tls13"
2025-07-17 09:20:27.374 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/auth/Register - application/json 83
2025-07-17 09:20:27.389 +04:00 [DBG] 1 candidate(s) found for the request path '/auth/Register'
2025-07-17 09:20:27.395 +04:00 [DBG] Request matched endpoint 'HTTP: POST auth/Register'
2025-07-17 09:20:27.402 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 09:20:27.407 +04:00 [DBG] Connection id "0HNE4U690C0HL", Request id "0HNE4U690C0HL:00000001": started reading request body.
2025-07-17 09:20:27.413 +04:00 [DBG] Connection id "0HNE4U690C0HL", Request id "0HNE4U690C0HL:00000001": done reading request body.
2025-07-17 09:20:27.419 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-07-17 09:20:27.422 +04:00 [INF] Executing endpoint 'HTTP: POST auth/Register'
2025-07-17 09:20:27.434 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 09:20:27.466 +04:00 [DBG] Creating DbConnection.
2025-07-17 09:20:27.470 +04:00 [DBG] Created DbConnection. (3ms).
2025-07-17 09:20:27.475 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:20:27.483 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:20:27.490 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 09:20:27.497 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-07-17 09:20:27.503 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2025-07-17 09:20:27.512 +04:00 [DBG] Executing DbCommand [Parameters=[@__mail_0='?' (Size = 4000), @__name_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Name], [u].[Password]
FROM [Users] AS [u]
WHERE [u].[Email] = @__mail_0 OR [u].[Name] = @__name_1
2025-07-17 09:20:27.536 +04:00 [INF] Executed DbCommand (24ms) [Parameters=[@__mail_0='?' (Size = 4000), @__name_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Name], [u].[Password]
FROM [Users] AS [u]
WHERE [u].[Email] = @__mail_0 OR [u].[Name] = @__name_1
2025-07-17 09:20:27.548 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:20:27.560 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 12ms reading results.
2025-07-17 09:20:27.572 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:20:27.589 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (16ms).
2025-07-17 09:20:27.698 +04:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:20:27.757 +04:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:20:27.791 +04:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-07-17 09:20:27.813 +04:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-07-17 09:20:27.841 +04:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-07-17 09:20:27.852 +04:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-07-17 09:20:27.859 +04:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-07-17 09:20:28.218 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:20:28.225 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:20:28.246 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 09:20:28.253 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-07-17 09:20:28.263 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (16ms).
2025-07-17 09:20:28.270 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Email], [Name], [Password])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-07-17 09:20:28.301 +04:00 [INF] Executed DbCommand (31ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Email], [Name], [Password])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-07-17 09:20:28.380 +04:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-07-17 09:20:28.413 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:20:28.420 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 99ms reading results.
2025-07-17 09:20:28.431 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:20:28.438 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (6ms).
2025-07-17 09:20:28.491 +04:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:20:28.511 +04:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-07-17 09:20:28.523 +04:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-07-17 09:20:28.530 +04:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-07-17 09:20:28.557 +04:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:20:28.569 +04:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-07-17 09:20:28.576 +04:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-07-17 09:20:28.607 +04:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.Roles'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:20:28.650 +04:00 [DBG] 'AppDbContext' generated a temporary value for the property 'UserRole.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:20:28.740 +04:00 [DBG] Context 'AppDbContext' started tracking 'UserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:20:28.751 +04:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-07-17 09:20:28.767 +04:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-07-17 09:20:28.777 +04:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-07-17 09:20:28.827 +04:00 [DBG] Executing 2 update commands as a batch.
2025-07-17 09:20:28.841 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:20:28.852 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:20:28.866 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-07-17 09:20:28.897 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-07-17 09:20:28.907 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 09:20:28.914 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-07-17 09:20:28.928 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (21ms).
2025-07-17 09:20:28.940 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p6='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserRoles] ([RoleId], [UserId], [UserId1])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
UPDATE [Users] SET [Email] = @p3, [Name] = @p4, [Password] = @p5
OUTPUT 1
WHERE [Id] = @p6;
2025-07-17 09:20:28.981 +04:00 [INF] Executed DbCommand (44ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p6='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserRoles] ([RoleId], [UserId], [UserId1])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
UPDATE [Users] SET [Email] = @p3, [Name] = @p4, [Password] = @p5
OUTPUT 1
WHERE [Id] = @p6;
2025-07-17 09:20:28.999 +04:00 [DBG] The foreign key property 'UserRole.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-07-17 09:20:29.018 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:20:29.027 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 32ms reading results.
2025-07-17 09:20:29.049 +04:00 [DBG] Committing transaction.
2025-07-17 09:20:29.069 +04:00 [DBG] Committed transaction.
2025-07-17 09:20:29.083 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:20:29.090 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (7ms).
2025-07-17 09:20:29.107 +04:00 [DBG] Disposing transaction.
2025-07-17 09:20:29.118 +04:00 [DBG] An entity of type 'UserRole' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:20:29.129 +04:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:20:29.141 +04:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-07-17 09:20:29.151 +04:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-07-17 09:20:29.159 +04:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-07-17 09:20:31.808 +04:00 [ERR] Exception Occured
System.Net.Mail.SmtpFailedRecipientException: User not local; please try a different path. The server response was: 5.5.1 Authentication is required to send mail
   at System.Net.Mail.SendMailAsyncResult.End(IAsyncResult result)
   at System.Net.Mail.SmtpClient.SendMailCallback(IAsyncResult result)
--- End of stack trace from previous location ---
   at OrderApp.Web.MailService.SendEmailAsync(String to, String subject, String body) in C:\Users\zakir\OneDrive\Masaüstü\Work\OrderApp\src\OrderApp.Web\MailService.cs:line 45
   at OrderApp.Web.Register.RegisterEndpointService.RegisterAsync(RegisterRequest req, CancellationToken ct) in C:\Users\zakir\OneDrive\Masaüstü\Work\OrderApp\src\OrderApp.Web\Register\RegisterEndpointService.cs:line 34
2025-07-17 09:20:31.822 +04:00 [ERR] Exception
System.InvalidOperationException: User not local; please try a different path. The server response was: 5.5.1 Authentication is required to send mail
   at OrderApp.Web.Register.ResgisterEndpoint.HandleAsync(RegisterRequest req, CancellationToken ct) in C:\Users\zakir\OneDrive\Masaüstü\Work\OrderApp\src\OrderApp.Web\Register\ResgisterEndpoint.cs:line 23
2025-07-17 09:20:31.829 +04:00 [INF] Executed endpoint 'HTTP: POST auth/Register'
2025-07-17 09:20:31.835 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/auth/Register  {
  "username": "ascnan",
  "password": "string",
  "email": "acscca@example.com"
} Responded with [400] in 4428ms
2025-07-17 09:20:31.841 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 09:20:31.848 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:20:31.855 +04:00 [DBG] Disposed connection to database '' on server '' (6ms).
2025-07-17 09:20:31.860 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/auth/Register - 400 245 application/json 4486.1067ms
2025-07-17 09:20:35.110 +04:00 [DBG] Connection id "0HNE4U690C0HL" received FIN.
2025-07-17 09:20:35.118 +04:00 [DBG] Connection id "0HNE4U690C0HL" is closed. The last processed stream ID was 1.
2025-07-17 09:20:35.118 +04:00 [DBG] The connection queue processing loop for 0HNE4U690C0HL completed.
2025-07-17 09:20:35.126 +04:00 [DBG] Connection id "0HNE4U690C0HL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-07-17 09:20:35.156 +04:00 [DBG] Connection id "0HNE4U690C0HL" stopped.
2025-07-17 09:22:31.220 +04:00 [INF] Application is shutting down...
2025-07-17 09:22:31.223 +04:00 [DBG] Hosting stopping
2025-07-17 09:22:31.254 +04:00 [DBG] Hosting stopped
2025-07-17 09:39:50.971 +04:00 [INF] Starting web host
2025-07-17 09:40:42.012 +04:00 [INF] Starting web host
2025-07-17 09:40:42.169 +04:00 [INF] Options were configured
2025-07-17 09:40:42.174 +04:00 [INF] Infrastructure services registered
2025-07-17 09:40:42.184 +04:00 [INF] Mediatr and Email Sender services registered
2025-07-17 09:40:42.511 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-07-17 09:40:43.067 +04:00 [DBG] The property 'PhoneNumber.ContributorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-07-17 09:40:43.073 +04:00 [WRN] The foreign key property 'UserRole.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-17 09:40:43.113 +04:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-17 09:40:43.184 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 09:40:43.198 +04:00 [DBG] Creating DbConnection.
2025-07-17 09:40:43.228 +04:00 [DBG] Created DbConnection. (28ms).
2025-07-17 09:40:43.232 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:40:43.367 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:40:43.376 +04:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-07-17 09:40:43.384 +04:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (7ms).
2025-07-17 09:40:43.388 +04:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (14ms).
2025-07-17 09:40:43.396 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-17 09:40:43.432 +04:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-17 09:40:43.440 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:40:43.446 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (4ms).
2025-07-17 09:40:43.453 +04:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-07-17 09:40:43.457 +04:00 [DBG] Created DbCommand for 'ExecuteScalar' (4ms).
2025-07-17 09:40:43.462 +04:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (8ms).
2025-07-17 09:40:43.464 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:40:43.465 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:40:43.466 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-07-17 09:40:43.530 +04:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-07-17 09:40:43.533 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:40:43.535 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (1ms).
2025-07-17 09:40:43.541 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 09:40:43.545 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:40:43.547 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-07-17 09:40:43.580 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-07-17 09:40:43.607 +04:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-17 09:40:43.787 +04:00 [INF] Registered 29 endpoints in 1,594 milliseconds.
2025-07-17 09:40:43.876 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 09:40:43.934 +04:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any()'
2025-07-17 09:40:44.150 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: OrderApp.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-07-17 09:40:44.189 +04:00 [DBG] Creating DbConnection.
2025-07-17 09:40:44.191 +04:00 [DBG] Created DbConnection. (1ms).
2025-07-17 09:40:44.195 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:40:44.198 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:40:44.199 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 09:40:44.200 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-07-17 09:40:44.201 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-07-17 09:40:44.203 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-17 09:40:44.211 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-17 09:40:44.228 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:40:44.235 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 16ms reading results.
2025-07-17 09:40:44.237 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:40:44.242 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (4ms).
2025-07-17 09:40:44.247 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 09:40:44.249 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:40:44.253 +04:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-07-17 09:40:44.259 +04:00 [DBG] Hosting starting
2025-07-17 09:40:44.276 +04:00 [INF] User profile is available. Using 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-17 09:40:44.310 +04:00 [DBG] Reading data from file 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys\key-d76fcede-8a6f-46d5-9032-13cac50778bc.xml'.
2025-07-17 09:40:44.317 +04:00 [DBG] Found key {d76fcede-8a6f-46d5-9032-13cac50778bc}.
2025-07-17 09:40:44.328 +04:00 [DBG] Considering key {d76fcede-8a6f-46d5-9032-13cac50778bc} with expiration date 2025-08-04 16:06:59Z as default key.
2025-07-17 09:40:44.336 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-07-17 09:40:44.340 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-07-17 09:40:44.344 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-07-17 09:40:44.349 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-07-17 09:40:44.353 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-07-17 09:40:44.357 +04:00 [DBG] Using key {d76fcede-8a6f-46d5-9032-13cac50778bc} as the default key.
2025-07-17 09:40:44.362 +04:00 [DBG] Key ring with default key {d76fcede-8a6f-46d5-9032-13cac50778bc} was loaded during application startup.
2025-07-17 09:40:44.394 +04:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-07-17 09:40:44.397 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-07-17 09:40:44.449 +04:00 [INF] Now listening on: https://localhost:57679
2025-07-17 09:40:44.453 +04:00 [DBG] Loaded hosting startup assembly OrderApp.Web
2025-07-17 09:40:44.456 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-17 09:40:44.459 +04:00 [INF] Hosting environment: Development
2025-07-17 09:40:44.461 +04:00 [INF] Content root path: C:\Users\zakir\OneDrive\Masaüstü\Work\OrderApp\src\OrderApp.Web
2025-07-17 09:40:44.463 +04:00 [DBG] Hosting started
2025-07-17 09:40:44.728 +04:00 [DBG] Connection id "0HNE4UHSP7SRQ" accepted.
2025-07-17 09:40:44.731 +04:00 [DBG] Connection id "0HNE4UHSP7SRQ" started.
2025-07-17 09:40:44.764 +04:00 [DBG] Connection 0HNE4UHSP7SRQ established using the following protocol: "Tls13"
2025-07-17 09:40:44.806 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2025-07-17 09:40:44.856 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-07-17 09:40:44.860 +04:00 [DBG] Request did not match any endpoints
2025-07-17 09:40:44.881 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 09:40:45.021 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html; charset=utf-8 215.4671ms
2025-07-17 09:40:45.557 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2025-07-17 09:40:45.564 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-07-17 09:40:45.566 +04:00 [DBG] Request did not match any endpoints
2025-07-17 09:40:45.568 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 09:40:45.577 +04:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-07-17 09:40:45.640 +04:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-07-17 09:40:46.336 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json; charset=utf-8 778.6052ms
2025-07-17 09:40:50.661 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2025-07-17 09:40:50.665 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-07-17 09:40:50.669 +04:00 [DBG] Request did not match any endpoints
2025-07-17 09:40:50.670 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 09:40:50.674 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html; charset=utf-8 13.6139ms
2025-07-17 09:40:50.929 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2025-07-17 09:40:50.932 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-07-17 09:40:50.933 +04:00 [DBG] Request did not match any endpoints
2025-07-17 09:40:50.936 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 09:40:50.940 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json; charset=utf-8 10.4174ms
2025-07-17 09:40:51.809 +04:00 [DBG] Connection id "0HNE4UHSP7SRQ" received FIN.
2025-07-17 09:40:51.815 +04:00 [DBG] Connection id "0HNE4UHSP7SRQ" is closed. The last processed stream ID was 7.
2025-07-17 09:40:51.815 +04:00 [DBG] The connection queue processing loop for 0HNE4UHSP7SRQ completed.
2025-07-17 09:40:51.818 +04:00 [DBG] Connection id "0HNE4UHSP7SRQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-07-17 09:40:51.826 +04:00 [DBG] Connection id "0HNE4UHSP7SRQ" stopped.
2025-07-17 09:41:02.495 +04:00 [DBG] Connection id "0HNE4UHSP7SRR" accepted.
2025-07-17 09:41:02.497 +04:00 [DBG] Connection id "0HNE4UHSP7SRR" started.
2025-07-17 09:41:02.504 +04:00 [DBG] Connection 0HNE4UHSP7SRR established using the following protocol: "Tls13"
2025-07-17 09:41:02.510 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/auth/Register - application/json 83
2025-07-17 09:41:02.525 +04:00 [DBG] 1 candidate(s) found for the request path '/auth/Register'
2025-07-17 09:41:02.529 +04:00 [DBG] Request matched endpoint 'HTTP: POST auth/Register'
2025-07-17 09:41:02.531 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 09:41:02.541 +04:00 [DBG] Connection id "0HNE4UHSP7SRR", Request id "0HNE4UHSP7SRR:00000001": started reading request body.
2025-07-17 09:41:02.545 +04:00 [DBG] Connection id "0HNE4UHSP7SRR", Request id "0HNE4UHSP7SRR:00000001": done reading request body.
2025-07-17 09:41:02.549 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-07-17 09:41:02.552 +04:00 [INF] Executing endpoint 'HTTP: POST auth/Register'
2025-07-17 09:41:02.738 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 09:41:02.757 +04:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Where(u => u.Email == __mail_0 || u.Name == __name_1)
    .FirstOrDefault()'
2025-07-17 09:41:02.847 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Email (string) Required, 1], [Property: User.Name (string) Required, 2], [Property: User.Password (string) Required, 3] }
            SELECT TOP(1) u.Id, u.Email, u.Name, u.Password
            FROM Users AS u
            WHERE (u.Email == @__mail_0) || (u.Name == @__name_1)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Email (string) Required, 1], [Property: User.Name (string) Required, 2], [Property: User.Password (string) Required, 3] }
            SELECT TOP(1) u.Id, u.Email, u.Name, u.Password
            FROM Users AS u
            WHERE (u.Email == @__mail_0) || (u.Name == @__name_1), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Email>k__BackingField = dataReader.GetString(1);
                                    instance.<Name>k__BackingField = dataReader.GetString(2);
                                    instance.<Password>k__BackingField = dataReader.GetString(3);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: OrderApp.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-07-17 09:41:02.878 +04:00 [DBG] Creating DbConnection.
2025-07-17 09:41:02.879 +04:00 [DBG] Created DbConnection. (1ms).
2025-07-17 09:41:02.882 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:41:02.886 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:41:02.889 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 09:41:02.891 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-07-17 09:41:02.896 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-07-17 09:41:02.904 +04:00 [DBG] Executing DbCommand [Parameters=[@__mail_0='?' (Size = 4000), @__name_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Name], [u].[Password]
FROM [Users] AS [u]
WHERE [u].[Email] = @__mail_0 OR [u].[Name] = @__name_1
2025-07-17 09:41:02.928 +04:00 [INF] Executed DbCommand (29ms) [Parameters=[@__mail_0='?' (Size = 4000), @__name_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Name], [u].[Password]
FROM [Users] AS [u]
WHERE [u].[Email] = @__mail_0 OR [u].[Name] = @__name_1
2025-07-17 09:41:02.936 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:41:02.941 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 8ms reading results.
2025-07-17 09:41:02.946 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:41:02.950 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (3ms).
2025-07-17 09:41:02.998 +04:00 [DBG] 'AppDbContext' generated a temporary value for the property 'User.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:41:03.081 +04:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:41:03.092 +04:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-07-17 09:41:03.098 +04:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-07-17 09:41:03.110 +04:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-07-17 09:41:03.113 +04:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-07-17 09:41:03.115 +04:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-07-17 09:41:03.209 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:41:03.213 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:41:03.220 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 09:41:03.223 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-07-17 09:41:03.226 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-07-17 09:41:03.229 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Email], [Name], [Password])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-07-17 09:41:03.244 +04:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Email], [Name], [Password])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-07-17 09:41:03.268 +04:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-07-17 09:41:03.281 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:41:03.285 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 35ms reading results.
2025-07-17 09:41:03.290 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:41:03.294 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (3ms).
2025-07-17 09:41:03.314 +04:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:41:03.321 +04:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-07-17 09:41:03.325 +04:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-07-17 09:41:03.328 +04:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-07-17 09:41:03.338 +04:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:41:03.342 +04:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-07-17 09:41:03.344 +04:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-07-17 09:41:03.352 +04:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'User.Roles'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:41:03.363 +04:00 [DBG] 'AppDbContext' generated a temporary value for the property 'UserRole.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:41:03.395 +04:00 [DBG] Context 'AppDbContext' started tracking 'UserRole' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:41:03.398 +04:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-07-17 09:41:03.403 +04:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-07-17 09:41:03.406 +04:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-07-17 09:41:03.421 +04:00 [DBG] Executing 2 update commands as a batch.
2025-07-17 09:41:03.425 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:41:03.427 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:41:03.432 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-07-17 09:41:03.443 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-07-17 09:41:03.447 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 09:41:03.450 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-07-17 09:41:03.455 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-07-17 09:41:03.459 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p6='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserRoles] ([RoleId], [UserId], [UserId1])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
UPDATE [Users] SET [Email] = @p3, [Name] = @p4, [Password] = @p5
OUTPUT 1
WHERE [Id] = @p6;
2025-07-17 09:41:03.484 +04:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p6='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [UserRoles] ([RoleId], [UserId], [UserId1])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
UPDATE [Users] SET [Email] = @p3, [Name] = @p4, [Password] = @p5
OUTPUT 1
WHERE [Id] = @p6;
2025-07-17 09:41:03.491 +04:00 [DBG] The foreign key property 'UserRole.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-07-17 09:41:03.498 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:41:03.501 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 11ms reading results.
2025-07-17 09:41:03.508 +04:00 [DBG] Committing transaction.
2025-07-17 09:41:03.516 +04:00 [DBG] Committed transaction.
2025-07-17 09:41:03.522 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:41:03.524 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (2ms).
2025-07-17 09:41:03.530 +04:00 [DBG] Disposing transaction.
2025-07-17 09:41:03.534 +04:00 [DBG] An entity of type 'UserRole' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:41:03.538 +04:00 [DBG] An entity of type 'User' tracked by 'AppDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 09:41:03.543 +04:00 [DBG] SaveChanges completed for 'AppDbContext' with 2 entities written to the database.
2025-07-17 09:41:03.547 +04:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-07-17 09:41:03.550 +04:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-07-17 09:41:05.623 +04:00 [ERR] Exception Occured
System.Net.Mail.SmtpException: Mailbox unavailable. The server response was: 5.7.1 Sending from domain gmail.com is not allowed
   at System.Net.Mail.MailCommand.CheckResponse(SmtpStatusCode statusCode, String response)
   at System.Net.Mail.MailCommand.EndSend(IAsyncResult result)
   at System.Net.Mail.SendMailAsyncResult.SendMailFromCompleted(IAsyncResult result)
--- End of stack trace from previous location ---
   at System.Net.Mail.SendMailAsyncResult.End(IAsyncResult result)
   at System.Net.Mail.SmtpClient.SendMailCallback(IAsyncResult result)
--- End of stack trace from previous location ---
   at OrderApp.Web.MailService.SendEmailAsync(String to, String subject, String body) in C:\Users\zakir\OneDrive\Masaüstü\Work\OrderApp\src\OrderApp.Web\MailService.cs:line 45
   at OrderApp.Web.Register.RegisterEndpointService.RegisterAsync(RegisterRequest req, CancellationToken ct) in C:\Users\zakir\OneDrive\Masaüstü\Work\OrderApp\src\OrderApp.Web\Register\RegisterEndpointService.cs:line 34
2025-07-17 09:41:05.671 +04:00 [ERR] Exception
System.InvalidOperationException: Mailbox unavailable. The server response was: 5.7.1 Sending from domain gmail.com is not allowed
   at OrderApp.Web.Register.ResgisterEndpoint.HandleAsync(RegisterRequest req, CancellationToken ct) in C:\Users\zakir\OneDrive\Masaüstü\Work\OrderApp\src\OrderApp.Web\Register\ResgisterEndpoint.cs:line 23
2025-07-17 09:41:05.698 +04:00 [INF] Executed endpoint 'HTTP: POST auth/Register'
2025-07-17 09:41:05.755 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/auth/Register  {
  "username": "1e2d109d1",
  "password": "string",
  "email": "120ifin@v.ccxom"
} Responded with [400] in 3204ms
2025-07-17 09:41:05.760 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 09:41:05.767 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 09:41:05.772 +04:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-07-17 09:41:05.776 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/auth/Register - 400 226 application/json 3265.6821ms
2025-07-17 09:41:11.823 +04:00 [DBG] Connection id "0HNE4UHSP7SRR" received FIN.
2025-07-17 09:41:11.827 +04:00 [DBG] Connection id "0HNE4UHSP7SRR" is closed. The last processed stream ID was 1.
2025-07-17 09:41:11.827 +04:00 [DBG] The connection queue processing loop for 0HNE4UHSP7SRR completed.
2025-07-17 09:41:11.831 +04:00 [DBG] Connection id "0HNE4UHSP7SRR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-07-17 09:41:11.853 +04:00 [DBG] Connection id "0HNE4UHSP7SRR" stopped.
2025-07-17 09:53:52.184 +04:00 [INF] Application is shutting down...
2025-07-17 09:53:52.186 +04:00 [DBG] Hosting stopping
2025-07-17 09:53:52.206 +04:00 [DBG] Hosting stopped
2025-07-17 11:03:06.228 +04:00 [INF] Starting web host
2025-07-17 11:03:06.845 +04:00 [INF] Options were configured
2025-07-17 11:03:06.855 +04:00 [INF] Infrastructure services registered
2025-07-17 11:03:06.886 +04:00 [INF] Mediatr and Email Sender services registered
2025-07-17 11:03:07.530 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-07-17 11:03:08.358 +04:00 [DBG] The property 'PhoneNumber.ContributorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-07-17 11:03:08.366 +04:00 [WRN] The foreign key property 'UserRole.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-17 11:03:08.451 +04:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-17 11:03:08.559 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 11:03:08.577 +04:00 [DBG] Creating DbConnection.
2025-07-17 11:03:08.628 +04:00 [DBG] Created DbConnection. (47ms).
2025-07-17 11:03:08.634 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:03:08.925 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:03:08.938 +04:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-07-17 11:03:08.949 +04:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (12ms).
2025-07-17 11:03:08.952 +04:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (19ms).
2025-07-17 11:03:08.963 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-17 11:03:09.015 +04:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-17 11:03:09.021 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:03:09.032 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (6ms).
2025-07-17 11:03:09.039 +04:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-07-17 11:03:09.041 +04:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2025-07-17 11:03:09.044 +04:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-07-17 11:03:09.046 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:03:09.049 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:03:09.051 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-07-17 11:03:09.314 +04:00 [INF] Executed DbCommand (262ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-07-17 11:03:09.319 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:03:09.322 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (2ms).
2025-07-17 11:03:09.330 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 11:03:09.334 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:03:09.338 +04:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-07-17 11:03:09.417 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-07-17 11:03:09.473 +04:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-17 11:03:09.767 +04:00 [INF] Registered 29 endpoints in 2,855 milliseconds.
2025-07-17 11:03:09.936 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 11:03:09.987 +04:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any()'
2025-07-17 11:03:10.262 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: OrderApp.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-07-17 11:03:10.307 +04:00 [DBG] Creating DbConnection.
2025-07-17 11:03:10.309 +04:00 [DBG] Created DbConnection. (2ms).
2025-07-17 11:03:10.312 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:03:10.314 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:03:10.316 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 11:03:10.317 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-07-17 11:03:10.319 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-07-17 11:03:10.322 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-17 11:03:10.336 +04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-17 11:03:10.352 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:03:10.355 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 14ms reading results.
2025-07-17 11:03:10.357 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:03:10.359 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (2ms).
2025-07-17 11:03:10.362 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 11:03:10.364 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:03:10.366 +04:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-07-17 11:03:10.368 +04:00 [DBG] Hosting starting
2025-07-17 11:03:10.387 +04:00 [INF] User profile is available. Using 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-17 11:03:10.422 +04:00 [DBG] Reading data from file 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys\key-d76fcede-8a6f-46d5-9032-13cac50778bc.xml'.
2025-07-17 11:03:10.432 +04:00 [DBG] Found key {d76fcede-8a6f-46d5-9032-13cac50778bc}.
2025-07-17 11:03:10.451 +04:00 [DBG] Considering key {d76fcede-8a6f-46d5-9032-13cac50778bc} with expiration date 2025-08-04 16:06:59Z as default key.
2025-07-17 11:03:10.457 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-07-17 11:03:10.459 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-07-17 11:03:10.464 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-07-17 11:03:10.469 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-07-17 11:03:10.471 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-07-17 11:03:10.474 +04:00 [DBG] Using key {d76fcede-8a6f-46d5-9032-13cac50778bc} as the default key.
2025-07-17 11:03:10.476 +04:00 [DBG] Key ring with default key {d76fcede-8a6f-46d5-9032-13cac50778bc} was loaded during application startup.
2025-07-17 11:03:10.517 +04:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-07-17 11:03:10.519 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-07-17 11:03:10.604 +04:00 [INF] Now listening on: https://localhost:57679
2025-07-17 11:03:10.605 +04:00 [DBG] Loaded hosting startup assembly OrderApp.Web
2025-07-17 11:03:10.607 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-17 11:03:10.608 +04:00 [INF] Hosting environment: Development
2025-07-17 11:03:10.609 +04:00 [INF] Content root path: D:\Work\OrderApp\src\OrderApp.Web
2025-07-17 11:03:10.611 +04:00 [DBG] Hosting started
2025-07-17 11:03:28.495 +04:00 [INF] Application is shutting down...
2025-07-17 11:03:28.495 +04:00 [DBG] Hosting stopping
2025-07-17 11:03:28.505 +04:00 [DBG] Hosting stopped
2025-07-17 11:38:09.253 +04:00 [INF] Starting web host
2025-07-17 11:38:09.721 +04:00 [INF] Options were configured
2025-07-17 11:38:09.732 +04:00 [INF] Infrastructure services registered
2025-07-17 11:38:09.760 +04:00 [INF] Mediatr and Email Sender services registered
2025-07-17 11:38:10.501 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-07-17 11:38:11.438 +04:00 [DBG] The property 'PhoneNumber.ContributorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-07-17 11:38:11.445 +04:00 [WRN] The foreign key property 'UserRole.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-17 11:38:11.541 +04:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-17 11:38:11.635 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 11:38:11.676 +04:00 [DBG] Creating DbConnection.
2025-07-17 11:38:11.753 +04:00 [DBG] Created DbConnection. (75ms).
2025-07-17 11:38:11.767 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:38:12.064 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:38:12.079 +04:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-07-17 11:38:12.090 +04:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (13ms).
2025-07-17 11:38:12.094 +04:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (21ms).
2025-07-17 11:38:12.153 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-17 11:38:12.230 +04:00 [INF] Executed DbCommand (111ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-17 11:38:12.238 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:38:12.252 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (8ms).
2025-07-17 11:38:12.261 +04:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-07-17 11:38:12.262 +04:00 [DBG] Created DbCommand for 'ExecuteScalar' (1ms).
2025-07-17 11:38:12.265 +04:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2025-07-17 11:38:12.268 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:38:12.272 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:38:12.275 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-07-17 11:38:12.403 +04:00 [INF] Executed DbCommand (128ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-07-17 11:38:12.407 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:38:12.409 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (1ms).
2025-07-17 11:38:12.415 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 11:38:12.420 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:38:12.424 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-07-17 11:38:12.508 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-07-17 11:38:12.560 +04:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-17 11:38:12.861 +04:00 [INF] Registered 29 endpoints in 3,073 milliseconds.
2025-07-17 11:38:13.057 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 11:38:13.108 +04:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any()'
2025-07-17 11:38:13.445 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: OrderApp.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-07-17 11:38:13.503 +04:00 [DBG] Creating DbConnection.
2025-07-17 11:38:13.506 +04:00 [DBG] Created DbConnection. (2ms).
2025-07-17 11:38:13.509 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:38:13.511 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:38:13.512 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 11:38:13.514 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-07-17 11:38:13.519 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-07-17 11:38:13.523 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-17 11:38:13.535 +04:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-17 11:38:13.557 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:38:13.562 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 19ms reading results.
2025-07-17 11:38:13.566 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:38:13.571 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (4ms).
2025-07-17 11:38:13.574 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 11:38:13.576 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:38:13.579 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-07-17 11:38:13.586 +04:00 [DBG] Hosting starting
2025-07-17 11:38:13.610 +04:00 [INF] User profile is available. Using 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-17 11:38:13.660 +04:00 [DBG] Reading data from file 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys\key-d76fcede-8a6f-46d5-9032-13cac50778bc.xml'.
2025-07-17 11:38:13.674 +04:00 [DBG] Found key {d76fcede-8a6f-46d5-9032-13cac50778bc}.
2025-07-17 11:38:13.697 +04:00 [DBG] Considering key {d76fcede-8a6f-46d5-9032-13cac50778bc} with expiration date 2025-08-04 16:06:59Z as default key.
2025-07-17 11:38:13.704 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-07-17 11:38:13.707 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-07-17 11:38:13.712 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-07-17 11:38:13.720 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-07-17 11:38:13.726 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-07-17 11:38:13.731 +04:00 [DBG] Using key {d76fcede-8a6f-46d5-9032-13cac50778bc} as the default key.
2025-07-17 11:38:13.735 +04:00 [DBG] Key ring with default key {d76fcede-8a6f-46d5-9032-13cac50778bc} was loaded during application startup.
2025-07-17 11:38:13.790 +04:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-07-17 11:38:13.796 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-07-17 11:38:13.905 +04:00 [INF] Now listening on: https://localhost:57679
2025-07-17 11:38:13.906 +04:00 [DBG] Loaded hosting startup assembly OrderApp.Web
2025-07-17 11:38:13.909 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-17 11:38:13.910 +04:00 [INF] Hosting environment: Development
2025-07-17 11:38:13.912 +04:00 [INF] Content root path: D:\Work\OrderApp\src\OrderApp.Web
2025-07-17 11:38:13.914 +04:00 [DBG] Hosting started
2025-07-17 11:38:22.434 +04:00 [DBG] Connection id "0HNE50JK4OE9A" accepted.
2025-07-17 11:38:22.436 +04:00 [DBG] Connection id "0HNE50JK4OE9A" started.
2025-07-17 11:38:22.530 +04:00 [DBG] Connection 0HNE50JK4OE9A established using the following protocol: "Tls13"
2025-07-17 11:38:22.614 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2025-07-17 11:38:22.720 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-07-17 11:38:22.722 +04:00 [DBG] Request did not match any endpoints
2025-07-17 11:38:22.782 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 11:38:22.953 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html; charset=utf-8 342.0989ms
2025-07-17 11:38:23.900 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2025-07-17 11:38:23.918 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-07-17 11:38:23.939 +04:00 [DBG] Request did not match any endpoints
2025-07-17 11:38:23.946 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 11:38:23.956 +04:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-07-17 11:38:24.035 +04:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-07-17 11:38:25.334 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json; charset=utf-8 1434.1518ms
2025-07-17 11:38:29.045 +04:00 [DBG] Connection id "0HNE50JK4OE9A" received FIN.
2025-07-17 11:38:29.051 +04:00 [DBG] Connection id "0HNE50JK4OE9A" is closed. The last processed stream ID was 3.
2025-07-17 11:38:29.052 +04:00 [DBG] The connection queue processing loop for 0HNE50JK4OE9A completed.
2025-07-17 11:38:29.054 +04:00 [DBG] Connection id "0HNE50JK4OE9A" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-07-17 11:38:29.062 +04:00 [DBG] Connection id "0HNE50JK4OE9A" stopped.
2025-07-17 11:38:38.945 +04:00 [DBG] Connection id "0HNE50JK4OE9B" accepted.
2025-07-17 11:38:38.950 +04:00 [DBG] Connection id "0HNE50JK4OE9B" started.
2025-07-17 11:38:38.962 +04:00 [DBG] Connection 0HNE50JK4OE9B established using the following protocol: "Tls13"
2025-07-17 11:38:38.971 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/Orders - null null
2025-07-17 11:38:38.998 +04:00 [DBG] 1 candidate(s) found for the request path '/Orders'
2025-07-17 11:38:39.004 +04:00 [DBG] Request matched endpoint 'HTTP: GET /Orders'
2025-07-17 11:38:39.012 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 11:38:39.022 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-07-17 11:38:39.031 +04:00 [INF] Executing endpoint 'HTTP: GET /Orders'
2025-07-17 11:38:39.403 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 11:38:39.453 +04:00 [DBG] Compiling query expression: 
'DbSet<Order>()
    .Include(o => o.Product)
    .Include(o => o.User)'
2025-07-17 11:38:39.499 +04:00 [DBG] Including navigation: 'Order.Product'.
2025-07-17 11:38:39.506 +04:00 [DBG] Including navigation: 'Order.User'.
2025-07-17 11:38:39.767 +04:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Order>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Order.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Order.CreatedAt (DateTime) Required, 1], [Property: Order.CreatedUserId (int) Required FK Index, 2], [Property: Order.DeletedAt (DateTime?), 3], [Property: Order.DeletedUserId (int?) FK Index, 4], [Property: Order.IsDeleted (bool) Required, 5], [Property: Order.ModifiedAt (DateTime?), 6], [Property: Order.ModifiedUserId (int?) FK Index, 7], [Property: Order.OrderDate (DateTime) Required, 8], [Property: Order.ProductId (int) Required FK Index, 9], [Property: Order.RestoredAt (DateTime?), 10], [Property: Order.RestoredUserId (int?) FK Index, 11], [Property: Order.UserId (int) Required FK Index, 12] }
            1 -> Dictionary<IProperty, int> { [Property: Product.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: Product.CompanyId (int) Required FK Index, 14], [Property: Product.Name (string) Required, 15], [Property: Product.Price (decimal) Required, 16] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required, 18], [Property: User.Name (string) Required, 19], [Property: User.Password (string) Required, 20] }
        SELECT o.Id, o.CreatedAt, o.CreatedUserId, o.DeletedAt, o.DeletedUserId, o.IsDeleted, o.ModifiedAt, o.ModifiedUserId, o.OrderDate, o.ProductId, o.RestoredAt, o.RestoredUserId, o.UserId, p.Id, p.CompanyId, p.Name, p.Price, u.Id, u.Email, u.Name, u.Password
        FROM Orders AS o
        INNER JOIN Products AS p ON o.ProductId == p.Id
        INNER JOIN Users AS u ON o.UserId == u.Id) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Order.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Order.CreatedAt (DateTime) Required, 1], [Property: Order.CreatedUserId (int) Required FK Index, 2], [Property: Order.DeletedAt (DateTime?), 3], [Property: Order.DeletedUserId (int?) FK Index, 4], [Property: Order.IsDeleted (bool) Required, 5], [Property: Order.ModifiedAt (DateTime?), 6], [Property: Order.ModifiedUserId (int?) FK Index, 7], [Property: Order.OrderDate (DateTime) Required, 8], [Property: Order.ProductId (int) Required FK Index, 9], [Property: Order.RestoredAt (DateTime?), 10], [Property: Order.RestoredUserId (int?) FK Index, 11], [Property: Order.UserId (int) Required FK Index, 12] }
            1 -> Dictionary<IProperty, int> { [Property: Product.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: Product.CompanyId (int) Required FK Index, 14], [Property: Product.Name (string) Required, 15], [Property: Product.Price (decimal) Required, 16] }
            2 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 17], [Property: User.Email (string) Required, 18], [Property: User.Name (string) Required, 19], [Property: User.Password (string) Required, 20] }
        SELECT o.Id, o.CreatedAt, o.CreatedUserId, o.DeletedAt, o.DeletedUserId, o.IsDeleted, o.ModifiedAt, o.ModifiedUserId, o.OrderDate, o.ProductId, o.RestoredAt, o.RestoredUserId, o.UserId, p.Id, p.CompanyId, p.Name, p.Price, u.Id, u.Email, u.Name, u.Password
        FROM Orders AS o
        INNER JOIN Products AS p ON o.ProductId == p.Id
        INNER JOIN Users AS u ON o.UserId == u.Id, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Order entity;
        Product entity;
        User entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Order instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Order);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Order.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("OrderApp.Core.OrderAggregate.Order").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Order)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Order | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("OrderApp.Core.OrderAggregate.Order")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Order | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("OrderApp.Core.OrderAggregate.Order")]: 
                        {
                            return 
                            {
                                Order instance;
                                instance = new Order();
                                instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(1);
                                instance.<CreatedUserId>k__BackingField = dataReader.GetInt32(2);
                                instance.<DeletedAt>k__BackingField = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
                                instance.<DeletedUserId>k__BackingField = dataReader.IsDBNull(4) ? default(int?) : (int?)dataReader.GetInt32(4);
                                instance.<IsDeleted>k__BackingField = dataReader.GetBoolean(5);
                                instance.<ModifiedAt>k__BackingField = dataReader.IsDBNull(6) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(6);
                                instance.<ModifiedUserId>k__BackingField = dataReader.IsDBNull(7) ? default(int?) : (int?)dataReader.GetInt32(7);
                                instance.<OrderDate>k__BackingField = dataReader.GetDateTime(8);
                                instance.<ProductId>k__BackingField = dataReader.GetInt32(9);
                                instance.<RestoredAt>k__BackingField = dataReader.IsDBNull(10) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(10);
                                instance.<RestoredUserId>k__BackingField = dataReader.IsDBNull(11) ? default(int?) : (int?)dataReader.GetInt32(11);
                                instance.<UserId>k__BackingField = dataReader.GetInt32(12);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Order | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("OrderApp.Core.OrderAggregate.Order")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Order)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        entity = 
        {
            MaterializationContext materializationContext2;
            IEntityType entityType2;
            Product instance2;
            InternalEntityEntry entry2;
            bool hasNullKey2;
            materializationContext2 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance2 = default(Product);
            entry2 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Product.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("OrderApp.Core.ProductAggregate.Product").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(13) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey2);
            !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
            {
                entityType2 = entry2.EntityType;
                return instance2 = (Product)entry2.Entity;
            } : 
            {
                ISnapshot shadowSnapshot2;
                shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType2 = [LIFTABLE Constant: EntityType: Product | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType("OrderApp.Core.ProductAggregate.Product")];
                instance2 = switch (entityType2)
                {
                    case [LIFTABLE Constant: EntityType: Product | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType("OrderApp.Core.ProductAggregate.Product")]: 
                        {
                            return 
                            {
                                Product instance;
                                instance = new Product();
                                instance.<Id>k__BackingField = dataReader.GetInt32(13);
                                instance.<CompanyId>k__BackingField = dataReader.GetInt32(14);
                                instance.<Name>k__BackingField = dataReader.GetString(15);
                                instance.<Price>k__BackingField = dataReader.GetDecimal(16);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext2.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Product | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType("OrderApp.Core.ProductAggregate.Product")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Product)
                }
                ;
                entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType2, 
                    entity: instance2, 
                    snapshot: shadowSnapshot2);
                return instance2;
            } : default(void);
            return instance2;
        };
        entity = 
        {
            MaterializationContext materializationContext3;
            IEntityType entityType3;
            User instance3;
            InternalEntityEntry entry3;
            bool hasNullKey3;
            materializationContext3 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance3 = default(User);
            entry3 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt32(17) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey3);
            !(hasNullKey3) ? entry3 != default(InternalEntityEntry) ? 
            {
                entityType3 = entry3.EntityType;
                return instance3 = (User)entry3.Entity;
            } : 
            {
                ISnapshot shadowSnapshot3;
                shadowSnapshot3 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType3 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User")];
                instance3 = switch (entityType3)
                {
                    case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User")]: 
                        {
                            return 
                            {
                                User instance;
                                instance = new User();
                                instance.<Id>k__BackingField = dataReader.GetInt32(17);
                                instance.<Email>k__BackingField = dataReader.GetString(18);
                                instance.<Name>k__BackingField = dataReader.GetString(19);
                                instance.<Password>k__BackingField = dataReader.GetString(20);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext3.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(User)
                }
                ;
                entry3 = entityType3 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType3, 
                    entity: instance3, 
                    snapshot: shadowSnapshot3);
                return instance3;
            } : default(void);
            return instance3;
        };
        ShaperProcessingExpressionVisitor.IncludeReference<Order, Order, Product>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Order.Product (Product) ToPrincipal Product | Resolver: namelessParameter{9} => namelessParameter{9}.Dependencies.Model.FindEntityType("OrderApp.Core.OrderAggregate.Order").FindNavigation("Product")], 
            inverseNavigation: default(INavigation), 
            fixup: (namelessParameter{10}, namelessParameter{11}) => 
            {
                return namelessParameter{10}.<Product>k__BackingField = namelessParameter{11};
            }, 
            trackingQuery: True);
        ShaperProcessingExpressionVisitor.IncludeReference<Order, Order, User>(
            queryContext: queryContext, 
            entity: entity, 
            relatedEntity: entity, 
            navigation: [LIFTABLE Constant: Navigation: Order.User (User) ToPrincipal User | Resolver: namelessParameter{12} => namelessParameter{12}.Dependencies.Model.FindEntityType("OrderApp.Core.OrderAggregate.Order").FindNavigation("User")], 
            inverseNavigation: default(INavigation), 
            fixup: (namelessParameter{13}, namelessParameter{14}) => 
            {
                return namelessParameter{13}.<User>k__BackingField = namelessParameter{14};
            }, 
            trackingQuery: True);
        return entity;
    }, 
    contextType: OrderApp.Infrastructure.Data.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-07-17 11:38:39.919 +04:00 [DBG] Creating DbConnection.
2025-07-17 11:38:39.973 +04:00 [DBG] Created DbConnection. (54ms).
2025-07-17 11:38:39.980 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:38:40.004 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:38:40.007 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 11:38:40.014 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2025-07-17 11:38:40.017 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-07-17 11:38:40.020 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedUserId], [o].[DeletedAt], [o].[DeletedUserId], [o].[IsDeleted], [o].[ModifiedAt], [o].[ModifiedUserId], [o].[OrderDate], [o].[ProductId], [o].[RestoredAt], [o].[RestoredUserId], [o].[UserId], [p].[Id], [p].[CompanyId], [p].[Name], [p].[Price], [u].[Id], [u].[Email], [u].[Name], [u].[Password]
FROM [Orders] AS [o]
INNER JOIN [Products] AS [p] ON [o].[ProductId] = [p].[Id]
INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[Id]
2025-07-17 11:38:40.086 +04:00 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedUserId], [o].[DeletedAt], [o].[DeletedUserId], [o].[IsDeleted], [o].[ModifiedAt], [o].[ModifiedUserId], [o].[OrderDate], [o].[ProductId], [o].[RestoredAt], [o].[RestoredUserId], [o].[UserId], [p].[Id], [p].[CompanyId], [p].[Name], [p].[Price], [u].[Id], [u].[Email], [u].[Name], [u].[Password]
FROM [Orders] AS [o]
INNER JOIN [Products] AS [p] ON [o].[ProductId] = [p].[Id]
INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[Id]
2025-07-17 11:38:40.091 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:38:40.095 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 5ms reading results.
2025-07-17 11:38:40.098 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:38:40.101 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (3ms).
2025-07-17 11:38:40.164 +04:00 [INF] Executed endpoint 'HTTP: GET /Orders'
2025-07-17 11:38:40.251 +04:00 [INF] Source:[::1] Request: GET https localhost:57679/Orders   Responded with [200] in 1219ms
2025-07-17 11:38:40.254 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 11:38:40.261 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:38:40.264 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-07-17 11:38:40.267 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/Orders - 200 105 application/json 1296.2964ms
2025-07-17 11:38:49.058 +04:00 [DBG] Connection id "0HNE50JK4OE9B" received FIN.
2025-07-17 11:38:49.062 +04:00 [DBG] Connection id "0HNE50JK4OE9B" is closed. The last processed stream ID was 1.
2025-07-17 11:38:49.063 +04:00 [DBG] The connection queue processing loop for 0HNE50JK4OE9B completed.
2025-07-17 11:38:49.066 +04:00 [DBG] Connection id "0HNE50JK4OE9B" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-07-17 11:38:49.074 +04:00 [DBG] Connection id "0HNE50JK4OE9B" stopped.
2025-07-17 11:41:16.464 +04:00 [DBG] Connection id "0HNE50JK4OE9C" accepted.
2025-07-17 11:41:16.472 +04:00 [DBG] Connection id "0HNE50JK4OE9C" started.
2025-07-17 11:41:16.492 +04:00 [DBG] Connection 0HNE50JK4OE9C established using the following protocol: "Tls13"
2025-07-17 11:41:16.503 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/Orders - application/json 78
2025-07-17 11:41:16.511 +04:00 [DBG] 1 candidate(s) found for the request path '/Orders'
2025-07-17 11:41:16.515 +04:00 [DBG] Request matched endpoint 'HTTP: POST /Orders'
2025-07-17 11:41:16.520 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 11:41:16.539 +04:00 [DBG] Connection id "0HNE50JK4OE9C", Request id "0HNE50JK4OE9C:00000001": started reading request body.
2025-07-17 11:41:16.544 +04:00 [DBG] Connection id "0HNE50JK4OE9C", Request id "0HNE50JK4OE9C:00000001": done reading request body.
2025-07-17 11:41:16.548 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-07-17 11:41:16.551 +04:00 [INF] Executing endpoint 'HTTP: POST /Orders'
2025-07-17 11:41:16.680 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 11:41:16.786 +04:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Order.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 11:41:17.042 +04:00 [DBG] Context 'AppDbContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 11:41:17.064 +04:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-07-17 11:41:17.083 +04:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-07-17 11:41:17.139 +04:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-07-17 11:41:17.145 +04:00 [INF] Audit interceptor: setting CreatedAt and CreatedUserId for entity Order
2025-07-17 11:41:17.150 +04:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-07-17 11:41:17.155 +04:00 [DBG] The unchanged property 'Order.CreatedAt' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-07-17 11:41:17.166 +04:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-07-17 11:41:17.403 +04:00 [DBG] Creating DbConnection.
2025-07-17 11:41:17.406 +04:00 [DBG] Created DbConnection. (3ms).
2025-07-17 11:41:17.409 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:41:17.414 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:41:17.427 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 11:41:17.429 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-07-17 11:41:17.439 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-07-17 11:41:17.452 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedUserId], [DeletedAt], [DeletedUserId], [IsDeleted], [ModifiedAt], [ModifiedUserId], [OrderDate], [ProductId], [RestoredAt], [RestoredUserId], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-07-17 11:41:17.515 +04:00 [INF] Executed DbCommand (70ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CreatedAt], [CreatedUserId], [DeletedAt], [DeletedUserId], [IsDeleted], [ModifiedAt], [ModifiedUserId], [OrderDate], [ProductId], [RestoredAt], [RestoredUserId], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-07-17 11:41:17.533 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:41:17.535 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 16ms reading results.
2025-07-17 11:41:17.538 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:41:17.541 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (2ms).
2025-07-17 11:41:17.584 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'OrderApp.Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Orders_Users_CreatedUserId". The conflict occurred in database "OrderApp", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:9d20622b-9805-462a-ae1b-c57ea51ec2d0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Orders_Users_CreatedUserId". The conflict occurred in database "OrderApp", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:9d20622b-9805-462a-ae1b-c57ea51ec2d0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-17 11:41:17.610 +04:00 [ERR] Unhandled
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Orders_Users_CreatedUserId". The conflict occurred in database "OrderApp", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:9d20622b-9805-462a-ae1b-c57ea51ec2d0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at OrderApp.Infrastructure.Data.AppDbContext.SaveChangesAsync(CancellationToken cancellationToken) in D:\Work\OrderApp\src\OrderApp.Infrastructure\Data\AppDbContext.cs:line 91
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.SaveChangesAsync(CancellationToken cancellationToken)
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.AddAsync(T entity, CancellationToken cancellationToken)
   at OrderApp.Web.Orders.Create.OrderEndpointService.CreateAsync(CreateOrderRequest req, CancellationToken ct) in D:\Work\OrderApp\src\OrderApp.Web\Orders\OrderEndpointService.cs:line 25
2025-07-17 11:41:17.645 +04:00 [INF] Executed endpoint 'HTTP: POST /Orders'
2025-07-17 11:41:17.677 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/Orders  {
  "orderDate": "2025-07-17T07:41:07.227Z",
  "userId": 1,
  "productId": 1
} Responded with [200] in 1151ms
2025-07-17 11:41:17.680 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 11:41:17.682 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:41:17.685 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-07-17 11:41:17.686 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/Orders - 200 84 application/json 1183.4306ms
2025-07-17 11:41:24.210 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/Orders - null null
2025-07-17 11:41:24.217 +04:00 [DBG] 1 candidate(s) found for the request path '/Orders'
2025-07-17 11:41:24.220 +04:00 [DBG] Request matched endpoint 'HTTP: GET /Orders'
2025-07-17 11:41:24.227 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 11:41:24.231 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-07-17 11:41:24.235 +04:00 [INF] Executing endpoint 'HTTP: GET /Orders'
2025-07-17 11:41:24.280 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 11:41:24.302 +04:00 [DBG] Creating DbConnection.
2025-07-17 11:41:24.304 +04:00 [DBG] Created DbConnection. (1ms).
2025-07-17 11:41:24.306 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:41:24.310 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:41:24.313 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 11:41:24.315 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-07-17 11:41:24.318 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-07-17 11:41:24.321 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedUserId], [o].[DeletedAt], [o].[DeletedUserId], [o].[IsDeleted], [o].[ModifiedAt], [o].[ModifiedUserId], [o].[OrderDate], [o].[ProductId], [o].[RestoredAt], [o].[RestoredUserId], [o].[UserId], [p].[Id], [p].[CompanyId], [p].[Name], [p].[Price], [u].[Id], [u].[Email], [u].[Name], [u].[Password]
FROM [Orders] AS [o]
INNER JOIN [Products] AS [p] ON [o].[ProductId] = [p].[Id]
INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[Id]
2025-07-17 11:41:24.335 +04:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[CreatedAt], [o].[CreatedUserId], [o].[DeletedAt], [o].[DeletedUserId], [o].[IsDeleted], [o].[ModifiedAt], [o].[ModifiedUserId], [o].[OrderDate], [o].[ProductId], [o].[RestoredAt], [o].[RestoredUserId], [o].[UserId], [p].[Id], [p].[CompanyId], [p].[Name], [p].[Price], [u].[Id], [u].[Email], [u].[Name], [u].[Password]
FROM [Orders] AS [o]
INNER JOIN [Products] AS [p] ON [o].[ProductId] = [p].[Id]
INNER JOIN [Users] AS [u] ON [o].[UserId] = [u].[Id]
2025-07-17 11:41:24.343 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:41:24.346 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 3ms reading results.
2025-07-17 11:41:24.349 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:41:24.353 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (4ms).
2025-07-17 11:41:24.360 +04:00 [INF] Executed endpoint 'HTTP: GET /Orders'
2025-07-17 11:41:24.366 +04:00 [INF] Source:[::1] Request: GET https localhost:57679/Orders   Responded with [200] in 135ms
2025-07-17 11:41:24.368 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 11:41:24.373 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:41:24.377 +04:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-07-17 11:41:24.381 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/Orders - 200 105 application/json 170.9549ms
2025-07-17 11:42:12.810 +04:00 [INF] Application is shutting down...
2025-07-17 11:42:12.812 +04:00 [DBG] Hosting stopping
2025-07-17 11:42:12.822 +04:00 [DBG] Connection id "0HNE50JK4OE9C" is closing.
2025-07-17 11:42:12.824 +04:00 [DBG] Connection id "0HNE50JK4OE9C" is closed. The last processed stream ID was 3.
2025-07-17 11:42:12.830 +04:00 [DBG] Connection id "0HNE50JK4OE9C" received FIN.
2025-07-17 11:42:12.832 +04:00 [DBG] Connection id "0HNE50JK4OE9C" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-07-17 11:42:12.834 +04:00 [DBG] The connection queue processing loop for 0HNE50JK4OE9C completed.
2025-07-17 11:42:12.840 +04:00 [DBG] Connection id "0HNE50JK4OE9C" stopped.
2025-07-17 11:42:12.848 +04:00 [DBG] Hosting stopped
2025-07-17 11:58:39.769 +04:00 [INF] Starting web host
2025-07-17 11:58:40.070 +04:00 [INF] Options were configured
2025-07-17 11:58:40.078 +04:00 [INF] Infrastructure services registered
2025-07-17 11:58:40.103 +04:00 [INF] Mediatr and Email Sender services registered
2025-07-17 11:58:40.612 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-07-17 11:58:41.526 +04:00 [DBG] The property 'PhoneNumber.ContributorId' was created in shadow state because there are no eligible CLR members with a matching name.
2025-07-17 11:58:41.534 +04:00 [WRN] The foreign key property 'UserRole.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-17 11:58:41.595 +04:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-17 11:58:41.693 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 11:58:41.713 +04:00 [DBG] Creating DbConnection.
2025-07-17 11:58:41.770 +04:00 [DBG] Created DbConnection. (53ms).
2025-07-17 11:58:41.780 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:58:42.000 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:58:42.013 +04:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-07-17 11:58:42.024 +04:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (10ms).
2025-07-17 11:58:42.029 +04:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (20ms).
2025-07-17 11:58:42.043 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-17 11:58:42.107 +04:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-17 11:58:42.118 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:58:42.131 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (9ms).
2025-07-17 11:58:42.145 +04:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-07-17 11:58:42.148 +04:00 [DBG] Created DbCommand for 'ExecuteScalar' (3ms).
2025-07-17 11:58:42.150 +04:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (6ms).
2025-07-17 11:58:42.154 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:58:42.160 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:58:42.164 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-07-17 11:58:42.271 +04:00 [INF] Executed DbCommand (107ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-07-17 11:58:42.278 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:58:42.281 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (3ms).
2025-07-17 11:58:42.288 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 11:58:42.296 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:58:42.299 +04:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-07-17 11:58:42.366 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-07-17 11:58:42.415 +04:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-17 11:58:42.708 +04:00 [INF] Registered 29 endpoints in 2,594 milliseconds.
2025-07-17 11:58:42.861 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 11:58:42.909 +04:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any()'
2025-07-17 11:58:43.210 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Users AS u), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
            return (bool)value1;
        }, 
        contextType: OrderApp.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-07-17 11:58:43.272 +04:00 [DBG] Creating DbConnection.
2025-07-17 11:58:43.274 +04:00 [DBG] Created DbConnection. (2ms).
2025-07-17 11:58:43.276 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:58:43.278 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:58:43.280 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 11:58:43.282 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-07-17 11:58:43.284 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-07-17 11:58:43.287 +04:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-17 11:58:43.297 +04:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-17 11:58:43.316 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:58:43.321 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 16ms reading results.
2025-07-17 11:58:43.325 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:58:43.330 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (4ms).
2025-07-17 11:58:43.335 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 11:58:43.337 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:58:43.343 +04:00 [DBG] Disposed connection to database '' on server '' (6ms).
2025-07-17 11:58:43.351 +04:00 [DBG] Hosting starting
2025-07-17 11:58:43.372 +04:00 [INF] User profile is available. Using 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-17 11:58:43.408 +04:00 [DBG] Reading data from file 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys\key-d76fcede-8a6f-46d5-9032-13cac50778bc.xml'.
2025-07-17 11:58:43.419 +04:00 [DBG] Found key {d76fcede-8a6f-46d5-9032-13cac50778bc}.
2025-07-17 11:58:43.430 +04:00 [DBG] Considering key {d76fcede-8a6f-46d5-9032-13cac50778bc} with expiration date 2025-08-04 16:06:59Z as default key.
2025-07-17 11:58:43.438 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-07-17 11:58:43.440 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-07-17 11:58:43.443 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-07-17 11:58:43.450 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-07-17 11:58:43.456 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-07-17 11:58:43.459 +04:00 [DBG] Using key {d76fcede-8a6f-46d5-9032-13cac50778bc} as the default key.
2025-07-17 11:58:43.462 +04:00 [DBG] Key ring with default key {d76fcede-8a6f-46d5-9032-13cac50778bc} was loaded during application startup.
2025-07-17 11:58:43.515 +04:00 [DBG] Middleware configuration started with options: {AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}
2025-07-17 11:58:43.519 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-07-17 11:58:43.605 +04:00 [INF] Now listening on: https://localhost:57679
2025-07-17 11:58:43.608 +04:00 [DBG] Loaded hosting startup assembly OrderApp.Web
2025-07-17 11:58:43.610 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-17 11:58:43.612 +04:00 [INF] Hosting environment: Development
2025-07-17 11:58:43.614 +04:00 [INF] Content root path: D:\Work\OrderApp\src\OrderApp.Web
2025-07-17 11:58:43.616 +04:00 [DBG] Hosting started
2025-07-17 11:58:45.765 +04:00 [DBG] Connection id "0HNE50V0NBESL" accepted.
2025-07-17 11:58:45.772 +04:00 [DBG] Connection id "0HNE50V0NBESL" started.
2025-07-17 11:58:45.901 +04:00 [DBG] Connection 0HNE50V0NBESL established using the following protocol: "Tls13"
2025-07-17 11:58:46.010 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2025-07-17 11:58:46.092 +04:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-07-17 11:58:46.095 +04:00 [DBG] Request did not match any endpoints
2025-07-17 11:58:46.132 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 11:58:46.264 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html; charset=utf-8 254.0299ms
2025-07-17 11:58:47.070 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2025-07-17 11:58:47.079 +04:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-07-17 11:58:47.082 +04:00 [DBG] Request did not match any endpoints
2025-07-17 11:58:47.091 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 11:58:47.098 +04:00 [DBG] Executing API description provider 'EndpointMetadataApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-07-17 11:58:47.232 +04:00 [DBG] Executing API description provider 'DefaultApiDescriptionProvider' from assembly Microsoft.AspNetCore.Mvc.ApiExplorer v9.0.0.0.
2025-07-17 11:58:49.051 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json; charset=utf-8 1980.8421ms
2025-07-17 11:58:57.641 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/auth/login - application/json 50
2025-07-17 11:58:57.655 +04:00 [DBG] 1 candidate(s) found for the request path '/auth/login'
2025-07-17 11:58:57.661 +04:00 [DBG] Request matched endpoint 'HTTP: POST /auth/login'
2025-07-17 11:58:57.666 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-07-17 11:58:57.677 +04:00 [DBG] Connection id "0HNE50V0NBESL", Request id "0HNE50V0NBESL:00000005": started reading request body.
2025-07-17 11:58:57.682 +04:00 [DBG] Connection id "0HNE50V0NBESL", Request id "0HNE50V0NBESL:00000005": done reading request body.
2025-07-17 11:58:57.689 +04:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-07-17 11:58:57.693 +04:00 [INF] Executing endpoint 'HTTP: POST /auth/login'
2025-07-17 11:58:57.874 +04:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.0' with options: EngineType=SqlServer 
2025-07-17 11:58:57.904 +04:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Where(u => u.Name == __name_0 && u.Password == __password_1)
    .FirstOrDefault()'
2025-07-17 11:58:58.035 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Email (string) Required, 1], [Property: User.Name (string) Required, 2], [Property: User.Password (string) Required, 3] }
            SELECT TOP(1) u.Id, u.Email, u.Name, u.Password
            FROM Users AS u
            WHERE (u.Name == @__name_0) && (u.Password == @__password_1)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Email (string) Required, 1], [Property: User.Name (string) Required, 2], [Property: User.Password (string) Required, 3] }
            SELECT TOP(1) u.Id, u.Email, u.Name, u.Password
            FROM Users AS u
            WHERE (u.Name == @__name_0) && (u.Password == @__password_1), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt32(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<Id>k__BackingField = dataReader.GetInt32(0);
                                    instance.<Email>k__BackingField = dataReader.GetString(1);
                                    instance.<Name>k__BackingField = dataReader.GetString(2);
                                    instance.<Password>k__BackingField = dataReader.GetString(3);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("OrderApp.Core.UserAggregate.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: OrderApp.Infrastructure.Data.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-07-17 11:58:58.077 +04:00 [DBG] Creating DbConnection.
2025-07-17 11:58:58.080 +04:00 [DBG] Created DbConnection. (2ms).
2025-07-17 11:58:58.083 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:58:58.088 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:58:58.090 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 11:58:58.093 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-07-17 11:58:58.103 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-07-17 11:58:58.110 +04:00 [DBG] Executing DbCommand [Parameters=[@__name_0='?' (Size = 4000), @__password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Name], [u].[Password]
FROM [Users] AS [u]
WHERE [u].[Name] = @__name_0 AND [u].[Password] = @__password_1
2025-07-17 11:58:58.144 +04:00 [INF] Executed DbCommand (37ms) [Parameters=[@__name_0='?' (Size = 4000), @__password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Name], [u].[Password]
FROM [Users] AS [u]
WHERE [u].[Name] = @__name_0 AND [u].[Password] = @__password_1
2025-07-17 11:58:58.225 +04:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-07-17 11:58:58.262 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:58:58.267 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 118ms reading results.
2025-07-17 11:58:58.272 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:58:58.276 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (4ms).
2025-07-17 11:58:58.304 +04:00 [DBG] Opening connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:58:58.307 +04:00 [DBG] Opened connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:58:58.311 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-07-17 11:58:58.315 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2025-07-17 11:58:58.320 +04:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-07-17 11:58:58.323 +04:00 [DBG] Executing DbCommand [Parameters=[@__name_0='?' (Size = 4000), @__password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Name], [u].[Password]
FROM [Users] AS [u]
WHERE [u].[Name] = @__name_0 AND [u].[Password] = @__password_1
2025-07-17 11:58:58.329 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__name_0='?' (Size = 4000), @__password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[Name], [u].[Password]
FROM [Users] AS [u]
WHERE [u].[Name] = @__name_0 AND [u].[Password] = @__password_1
2025-07-17 11:58:58.338 +04:00 [DBG] Closing data reader to 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:58:58.340 +04:00 [DBG] A data reader for 'OrderApp' on server 'DESKTOP-ZAKIR' is being disposed after spending 4ms reading results.
2025-07-17 11:58:58.344 +04:00 [DBG] Closing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:58:58.348 +04:00 [DBG] Closed connection to database 'OrderApp' on server 'DESKTOP-ZAKIR' (3ms).
2025-07-17 11:58:58.394 +04:00 [INF] Executed endpoint 'HTTP: POST /auth/login'
2025-07-17 11:58:58.483 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/auth/login  {
  "username": "string",
  "password": "string"
} Responded with [200] in 796ms
2025-07-17 11:58:58.488 +04:00 [DBG] 'AppDbContext' disposed.
2025-07-17 11:58:58.495 +04:00 [DBG] Disposing connection to database 'OrderApp' on server 'DESKTOP-ZAKIR'.
2025-07-17 11:58:58.499 +04:00 [DBG] Disposed connection to database '' on server '' (3ms).
2025-07-17 11:58:58.504 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/auth/login - 200 541 application/json 862.5583ms
2025-07-17 11:59:08.792 +04:00 [INF] Application is shutting down...
2025-07-17 11:59:08.794 +04:00 [DBG] Hosting stopping
2025-07-17 11:59:08.805 +04:00 [DBG] Connection id "0HNE50V0NBESL" is closing.
2025-07-17 11:59:08.807 +04:00 [DBG] Connection id "0HNE50V0NBESL" is closed. The last processed stream ID was 5.
2025-07-17 11:59:08.812 +04:00 [DBG] Connection id "0HNE50V0NBESL" received FIN.
2025-07-17 11:59:08.816 +04:00 [DBG] Connection id "0HNE50V0NBESL" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-07-17 11:59:08.817 +04:00 [DBG] The connection queue processing loop for 0HNE50V0NBESL completed.
2025-07-17 11:59:08.825 +04:00 [DBG] Connection id "0HNE50V0NBESL" stopped.
2025-07-17 11:59:08.835 +04:00 [DBG] Hosting stopped
